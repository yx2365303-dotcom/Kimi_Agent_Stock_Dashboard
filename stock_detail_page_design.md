# ä¸ªè‚¡è¯¦æƒ…é¡µæ¨¡å—è®¾è®¡æ–¹æ¡ˆ

## ä¸€ã€é¡µé¢å¸ƒå±€è®¾è®¡

### 1.1 æ•´ä½“å¸ƒå±€ç»“æ„ï¼ˆå“åº”å¼è®¾è®¡ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           é¡¶éƒ¨å¯¼èˆªæ  (Header)                                â”‚
â”‚  [Logo]  [æœç´¢æ¡†ğŸ”]  [å¸‚åœºæ¦‚è§ˆ]  [è‡ªé€‰è‚¡]  [è®¾ç½®]  [ç”¨æˆ·å¤´åƒ]               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯åŒº (StockHeader)                     â”‚   â”‚
â”‚  â”‚  è‚¡ç¥¨åç§°(ä»£ç )  å½“å‰ä»·  æ¶¨è·Œé¢  æ¶¨è·Œå¹…  æˆäº¤é‡  æˆäº¤é¢  æ¢æ‰‹ç‡      â”‚   â”‚
â”‚  â”‚  [æ”¶è—â­] [æé†’ğŸ””] [åˆ†äº«] [ä¹°å–]                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                          â”‚  â”‚                                          â”‚ â”‚
â”‚  â”‚   ä¸»å›¾è¡¨åŒº (MainChart)   â”‚  â”‚      ç›˜å£ä¸äº¤æ˜“åŒº (OrderBook)            â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚   Kçº¿å›¾/åˆ†æ—¶å›¾     â”‚  â”‚  â”‚  â”‚        äº”æ¡£ä¹°å–ç›˜                â”‚   â”‚ â”‚
â”‚  â”‚  â”‚   (KLine/Time)     â”‚  â”‚  â”‚  â”‚  å–äº”  ä»·æ ¼  æ•°é‡                â”‚   â”‚ â”‚
â”‚  â”‚  â”‚                    â”‚  â”‚  â”‚  â”‚  ...                            â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  [æ—¥K][å‘¨K][æœˆK]   â”‚  â”‚  â”‚  â”‚  ä¹°ä¸€  ä»·æ ¼  æ•°é‡                â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  [å‰å¤æƒ][åå¤æƒ]  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚        æˆäº¤æ˜ç»†                  â”‚   â”‚ â”‚
â”‚  â”‚  â”‚   æŠ€æœ¯æŒ‡æ ‡å‰¯å›¾     â”‚  â”‚  â”‚  â”‚  æ—¶é—´  ä»·æ ¼  æˆäº¤é‡  æ–¹å‘        â”‚   â”‚ â”‚
â”‚  â”‚  â”‚ (MACD/KDJ/RSI...)  â”‚  â”‚  â”‚  â”‚  ...                            â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚                          â”‚  â”‚                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           ~65%                          ~35%                                â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    æ•°æ®Tabåˆ‡æ¢åŒº (DataTabs)                          â”‚   â”‚
â”‚  â”‚  [èµ„é‡‘æµå‘] [ç­¹ç åˆ†å¸ƒ] [åŸºæœ¬é¢] [è´¢åŠ¡æŒ‡æ ‡] [æ–°é—»å…¬å‘Š] [ç›¸å…³è‚¡ç¥¨]    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    è¯¦ç»†æ•°æ®å±•ç¤ºåŒº (DetailPanel)                      â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  æ ¹æ®Tabåˆ‡æ¢æ˜¾ç¤ºä¸åŒå†…å®¹ï¼š                                           â”‚   â”‚
â”‚  â”‚  - èµ„é‡‘æµå‘ï¼šå‡€æµå…¥å›¾è¡¨ã€ä¸»åŠ›åŠ¨å‘ã€æ•£æˆ·åŠ¨å‘                          â”‚   â”‚
â”‚  â”‚  - ç­¹ç åˆ†å¸ƒï¼šç­¹ç åˆ†å¸ƒå›¾ã€æˆæœ¬åŒºé—´ã€è·åˆ©æ¯”ä¾‹                          â”‚   â”‚
â”‚  â”‚  - åŸºæœ¬é¢ï¼šPE/PBã€å¸‚å€¼ã€ä¼°å€¼åˆ†æ                                     â”‚   â”‚
â”‚  â”‚  - è´¢åŠ¡æŒ‡æ ‡ï¼šç›ˆåˆ©èƒ½åŠ›ã€å¿å€ºèƒ½åŠ›ã€æˆé•¿èƒ½åŠ›                            â”‚   â”‚
â”‚  â”‚  - æ–°é—»å…¬å‘Šï¼šå…¬å¸æ–°é—»ã€å…¬å‘Šã€ç ”æŠ¥                                    â”‚   â”‚
â”‚  â”‚  - ç›¸å…³è‚¡ç¥¨ï¼šåŒè¡Œä¸šã€åŒæ¦‚å¿µè‚¡ç¥¨                                      â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 å“åº”å¼æ–­ç‚¹è®¾è®¡

| æ–­ç‚¹ | å®½åº¦èŒƒå›´ | å¸ƒå±€è°ƒæ•´ |
|------|----------|----------|
| xl | â‰¥1920px | ä¸»å›¾è¡¨åŒº70% + ç›˜å£åŒº30%ï¼Œä¾§è¾¹æ æ˜¾ç¤ºå®Œæ•´ |
| lg | â‰¥1440px | ä¸»å›¾è¡¨åŒº65% + ç›˜å£åŒº35%ï¼Œæ­£å¸¸æ˜¾ç¤º |
| md | â‰¥1024px | ä¸»å›¾è¡¨åŒº60% + ç›˜å£åŒº40%ï¼Œç›˜å£åŒºç²¾ç®€ |
| sm | â‰¥768px | å•åˆ—å¸ƒå±€ï¼Œç›˜å£åŒºç§»è‡³å›¾è¡¨ä¸‹æ–¹ |
| xs | <768px | å•åˆ—å¸ƒå±€ï¼ŒTabåˆ‡æ¢ä¸ºæ¨ªå‘æ»šåŠ¨ |

### 1.3 ç§»åŠ¨ç«¯é€‚é…å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯åŒº (ç®€åŒ–ç‰ˆ)        â”‚
â”‚  åç§°ä»£ç  | å½“å‰ä»· | æ¶¨è·Œå¹…     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åˆ†æ—¶å›¾/Kçº¿å›¾ (å…¨å®½)           â”‚
â”‚  [åˆ†æ—¶] [æ—¥K] [å‘¨K] [æœˆK]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  äº”æ¡£ç›˜å£ (æ¨ªå‘æ»‘åŠ¨)           â”‚
â”‚  ä¹°â‘ -â‘¤ | å–â‘ -â‘¤              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Tabå¯¼èˆª (æ¨ªå‘æ»šåŠ¨)            â”‚
â”‚  [èµ„é‡‘][ç­¹ç ][åŸºæœ¬é¢][è´¢åŠ¡]... â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¯¦ç»†æ•°æ®åŒº (å½“å‰Tabå†…å®¹)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äºŒã€ç»„ä»¶å±‚æ¬¡ç»“æ„

### 2.1 ç»„ä»¶æ ‘ç»“æ„

```
StockDetailPage (ä¸ªè‚¡è¯¦æƒ…é¡µ - é¡µé¢çº§)
â”œâ”€â”€ StockHeader (è‚¡ç¥¨å¤´éƒ¨ä¿¡æ¯ - å®¹å™¨ç»„ä»¶)
â”‚   â”œâ”€â”€ StockBasicInfo (åŸºç¡€ä¿¡æ¯ - å±•ç¤ºç»„ä»¶)
â”‚   â”‚   â”œâ”€â”€ StockNameCode (è‚¡ç¥¨åç§°ä»£ç )
â”‚   â”‚   â”œâ”€â”€ CurrentPrice (å½“å‰ä»·æ ¼)
â”‚   â”‚   â”œâ”€â”€ PriceChange (æ¶¨è·Œä¿¡æ¯)
â”‚   â”‚   â””â”€â”€ MarketStatus (å¸‚åœºçŠ¶æ€)
â”‚   â”œâ”€â”€ TradingStats (äº¤æ˜“ç»Ÿè®¡ - å±•ç¤ºç»„ä»¶)
â”‚   â”‚   â”œâ”€â”€ VolumeStats (æˆäº¤é‡ç»Ÿè®¡)
â”‚   â”‚   â”œâ”€â”€ TurnoverStats (æˆäº¤é¢ç»Ÿè®¡)
â”‚   â”‚   â””â”€â”€ TurnoverRate (æ¢æ‰‹ç‡)
â”‚   â””â”€â”€ ActionButtons (æ“ä½œæŒ‰é’® - äº¤äº’ç»„ä»¶)
â”‚       â”œâ”€â”€ FavoriteButton (æ”¶è—æŒ‰é’®)
â”‚       â”œâ”€â”€ AlertButton (æé†’æŒ‰é’®)
â”‚       â””â”€â”€ ShareButton (åˆ†äº«æŒ‰é’®)
â”‚
â”œâ”€â”€ MainChartSection (ä¸»å›¾è¡¨åŒº - å®¹å™¨ç»„ä»¶)
â”‚   â”œâ”€â”€ ChartToolbar (å›¾è¡¨å·¥å…·æ  - äº¤äº’ç»„ä»¶)
â”‚   â”‚   â”œâ”€â”€ PeriodSelector (å‘¨æœŸé€‰æ‹©å™¨: åˆ†æ—¶/æ—¥K/å‘¨K/æœˆK)
â”‚   â”‚   â”œâ”€â”€ AdjustSelector (å¤æƒé€‰æ‹©å™¨: å‰å¤æƒ/åå¤æƒ/ä¸å¤æƒ)
â”‚   â”‚   â”œâ”€â”€ IndicatorSelector (æŒ‡æ ‡é€‰æ‹©å™¨)
â”‚   â”‚   â””â”€â”€ ChartSettings (å›¾è¡¨è®¾ç½®)
â”‚   â”œâ”€â”€ KLineChart (Kçº¿å›¾ - å›¾è¡¨ç»„ä»¶)
â”‚   â”‚   â”œâ”€â”€ CandlestickSeries (èœ¡çƒ›å›¾ç³»åˆ—)
â”‚   â”‚   â”œâ”€â”€ VolumeSeries (æˆäº¤é‡ç³»åˆ—)
â”‚   â”‚   â”œâ”€â”€ MASeries (å‡çº¿ç³»åˆ—: MA5/MA10/MA20/MA30/MA60)
â”‚   â”‚   â””â”€â”€ Crosshair (åå­—å…‰æ ‡)
â”‚   â”œâ”€â”€ TimeSeriesChart (åˆ†æ—¶å›¾ - å›¾è¡¨ç»„ä»¶)
â”‚   â”‚   â”œâ”€â”€ PriceLine (ä»·æ ¼çº¿)
â”‚   â”‚   â”œâ”€â”€ AvgLine (å‡ä»·çº¿)
â”‚   â”‚   â””â”€â”€ VolumeBar (æˆäº¤é‡æŸ±çŠ¶å›¾)
â”‚   â””â”€â”€ SubIndicatorChart (å‰¯å›¾æŒ‡æ ‡ - å›¾è¡¨ç»„ä»¶)
â”‚       â”œâ”€â”€ MACDChart (MACDæŒ‡æ ‡)
â”‚       â”œâ”€â”€ KDJChart (KDJæŒ‡æ ‡)
â”‚       â”œâ”€â”€ RSIChart (RSIæŒ‡æ ‡)
â”‚       â””â”€â”€ BOLLChart (å¸ƒæ—å¸¦)
â”‚
â”œâ”€â”€ OrderBookSection (ç›˜å£äº¤æ˜“åŒº - å®¹å™¨ç»„ä»¶)
â”‚   â”œâ”€â”€ FiveLevelOrder (äº”æ¡£ç›˜å£ - å±•ç¤ºç»„ä»¶)
â”‚   â”‚   â”œâ”€â”€ AskLevels (å–ç›˜äº”æ¡£)
â”‚   â”‚   â””â”€â”€ BidLevels (ä¹°ç›˜äº”æ¡£)
â”‚   â”œâ”€â”€ TradeDetails (æˆäº¤æ˜ç»† - å±•ç¤ºç»„ä»¶)
â”‚   â”‚   â”œâ”€â”€ TradeList (æˆäº¤åˆ—è¡¨)
â”‚   â”‚   â””â”€â”€ TradeSummary (æˆäº¤æ±‡æ€»)
â”‚   â””â”€â”€ QuickTrade (å¿«æ·äº¤æ˜“ - äº¤äº’ç»„ä»¶)
â”‚       â”œâ”€â”€ BuyButton (ä¹°å…¥æŒ‰é’®)
â”‚       â””â”€â”€ SellButton (å–å‡ºæŒ‰é’®)
â”‚
â”œâ”€â”€ DataTabsSection (æ•°æ®TabåŒº - å®¹å™¨ç»„ä»¶)
â”‚   â””â”€â”€ TabNavigator (Tabå¯¼èˆª - äº¤äº’ç»„ä»¶)
â”‚
â””â”€â”€ DetailPanelSection (è¯¦ç»†é¢æ¿åŒº - å®¹å™¨ç»„ä»¶)
    â”œâ”€â”€ MoneyFlowPanel (èµ„é‡‘æµå‘é¢æ¿)
    â”‚   â”œâ”€â”€ MoneyFlowChart (èµ„é‡‘æµå›¾è¡¨)
    â”‚   â”œâ”€â”€ MainForceStats (ä¸»åŠ›èµ„é‡‘ç»Ÿè®¡)
    â”‚   â””â”€â”€ RetailForceStats (æ•£æˆ·èµ„é‡‘ç»Ÿè®¡)
    â”‚
    â”œâ”€â”€ ChipDistributionPanel (ç­¹ç åˆ†å¸ƒé¢æ¿)
    â”‚   â”œâ”€â”€ ChipChart (ç­¹ç åˆ†å¸ƒå›¾)
    â”‚   â”œâ”€â”€ CostAnalysis (æˆæœ¬åˆ†æ)
    â”‚   â””â”€â”€ WinRate (è·åˆ©æ¯”ä¾‹)
    â”‚
    â”œâ”€â”€ FundamentalPanel (åŸºæœ¬é¢é¢æ¿)
    â”‚   â”œâ”€â”€ ValuationCards (ä¼°å€¼å¡ç‰‡)
    â”‚   â”‚   â”œâ”€â”€ PECard (å¸‚ç›ˆç‡)
    â”‚   â”‚   â”œâ”€â”€ PBCard (å¸‚å‡€ç‡)
    â”‚   â”‚   â””â”€â”€ MarketCapCard (å¸‚å€¼)
    â”‚   â””â”€â”€ MarketStats (å¸‚åœºç»Ÿè®¡)
    â”‚
    â”œâ”€â”€ FinancialPanel (è´¢åŠ¡æŒ‡æ ‡é¢æ¿)
    â”‚   â”œâ”€â”€ Profitability (ç›ˆåˆ©èƒ½åŠ›)
    â”‚   â”œâ”€â”€ Solvency (å¿å€ºèƒ½åŠ›)
    â”‚   â”œâ”€â”€ Growth (æˆé•¿èƒ½åŠ›)
    â”‚   â””â”€â”€ Operational (è¥è¿èƒ½åŠ›)
    â”‚
    â”œâ”€â”€ NewsPanel (æ–°é—»å…¬å‘Šé¢æ¿)
    â”‚   â”œâ”€â”€ NewsList (æ–°é—»åˆ—è¡¨)
    â”‚   â”œâ”€â”€ AnnouncementList (å…¬å‘Šåˆ—è¡¨)
    â”‚   â””â”€â”€ ResearchList (ç ”æŠ¥åˆ—è¡¨)
    â”‚
    â””â”€â”€ RelatedStocksPanel (ç›¸å…³è‚¡ç¥¨é¢æ¿)
        â”œâ”€â”€ SameIndustry (åŒè¡Œä¸šè‚¡ç¥¨)
        â””â”€â”€ SameConcept (åŒæ¦‚å¿µè‚¡ç¥¨)
```

### 2.2 ç»„ä»¶èŒè´£è¯´æ˜

| ç»„ä»¶å±‚çº§ | ç»„ä»¶åç§° | èŒè´£ | æ•°æ®ä¾èµ– |
|----------|----------|------|----------|
| é¡µé¢çº§ | StockDetailPage | é¡µé¢æ•´ä½“å¸ƒå±€ã€è·¯ç”±å‚æ•°å¤„ç†ã€å…¨å±€çŠ¶æ€ç®¡ç† | ts_code |
| å®¹å™¨çº§ | StockHeader | æ•´åˆå¤´éƒ¨æ‰€æœ‰å­ç»„ä»¶ | stock_basic, daily |
| å®¹å™¨çº§ | MainChartSection | ç®¡ç†å›¾è¡¨çŠ¶æ€ã€å‘¨æœŸåˆ‡æ¢ | daily, stk_factor, adj_factor |
| å®¹å™¨çº§ | OrderBookSection | ç®¡ç†ç›˜å£æ•°æ®å±•ç¤º | å®æ—¶è¡Œæƒ…æ•°æ® |
| å®¹å™¨çº§ | DetailPanelSection | æ ¹æ®Tabåˆ‡æ¢å±•ç¤ºä¸åŒé¢æ¿ | å„æ•°æ®è¡¨ |
| å›¾è¡¨çº§ | KLineChart | æ¸²æŸ“Kçº¿å›¾ã€å¤„ç†äº¤äº’ | daily + adj_factor |
| å›¾è¡¨çº§ | TimeSeriesChart | æ¸²æŸ“åˆ†æ—¶å›¾ | å®æ—¶åˆ†æ—¶æ•°æ® |
| å›¾è¡¨çº§ | *SubIndicatorChart | æ¸²æŸ“æŠ€æœ¯æŒ‡æ ‡ | stk_factor |
| å±•ç¤ºçº§ | FiveLevelOrder | å±•ç¤ºäº”æ¡£ä¹°å–ç›˜ | å®æ—¶ç›˜å£æ•°æ® |
| å±•ç¤ºçº§ | TradeDetails | å±•ç¤ºæˆäº¤æ˜ç»† | å®æ—¶æˆäº¤æ•°æ® |
| äº¤äº’çº§ | ChartToolbar | å›¾è¡¨é…ç½®åˆ‡æ¢ | æœ¬åœ°çŠ¶æ€ |
| äº¤äº’çº§ | TabNavigator | Tabåˆ‡æ¢å¯¼èˆª | æœ¬åœ°çŠ¶æ€ |

---

## ä¸‰ã€æ•°æ®è·å–ç­–ç•¥

### 3.1 æ•°æ®åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®å±•ç¤ºå±‚ (Presentation)                  â”‚
â”‚         React Components / Vue Components                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    çŠ¶æ€ç®¡ç†å±‚ (State Management)              â”‚
â”‚              Zustand / Redux Toolkit / Pinia                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®æœåŠ¡å±‚ (Data Service)                  â”‚
â”‚         API Client / Data Fetcher / Cache Manager            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®æºå±‚ (Data Source)                     â”‚
â”‚    Tushare API / å®æ—¶è¡Œæƒ…WebSocket / ç¼“å­˜æ•°æ®åº“(Redis)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 æ•°æ®è·å–ä¼˜å…ˆçº§ç­–ç•¥

| ä¼˜å…ˆçº§ | æ•°æ®ç±»å‹ | è·å–æ—¶æœº | ç¼“å­˜ç­–ç•¥ | æ•°æ®æº |
|--------|----------|----------|----------|--------|
| P0 | è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ | é¡µé¢åŠ è½½ç«‹å³è·å– | é•¿æœŸç¼“å­˜(24h) | stock_basic |
| P0 | æ—¥çº¿è¡Œæƒ…æ•°æ® | é¡µé¢åŠ è½½ç«‹å³è·å– | å¢é‡ç¼“å­˜(1h) | daily + adj_factor |
| P0 | å®æ—¶è¡Œæƒ… | å»ºç«‹WebSocketè¿æ¥ | ä¸ç¼“å­˜ | WebSocket |
| P1 | æŠ€æœ¯æŒ‡æ ‡ | å›¾è¡¨æ¸²æŸ“æ—¶è·å– | çŸ­æœŸç¼“å­˜(30min) | stk_factor |
| P1 | ç›˜å£æ•°æ® | å»ºç«‹WebSocketè¿æ¥ | ä¸ç¼“å­˜ | WebSocket |
| P2 | èµ„é‡‘æµå‘ | Tabåˆ‡æ¢æ—¶è·å– | çŸ­æœŸç¼“å­˜(15min) | moneyflow |
| P2 | ç­¹ç åˆ†å¸ƒ | Tabåˆ‡æ¢æ—¶è·å– | çŸ­æœŸç¼“å­˜(15min) | cyq_chips, cyq_perf |
| P3 | åŸºæœ¬é¢æ•°æ® | Tabåˆ‡æ¢æ—¶è·å– | ä¸­æœŸç¼“å­˜(4h) | daily_basic |
| P3 | è´¢åŠ¡æŒ‡æ ‡ | Tabåˆ‡æ¢æ—¶è·å– | é•¿æœŸç¼“å­˜(24h) | fina_indicator |
| P4 | æ–°é—»å…¬å‘Š | ç”¨æˆ·æ»šåŠ¨æ—¶æ‡’åŠ è½½ | çŸ­æœŸç¼“å­˜(10min) | æ–°é—»API |

### 3.3 APIè®¾è®¡

```typescript
// æ•°æ®æœåŠ¡æ¥å£å®šä¹‰
interface StockDataService {
  // åŸºç¡€ä¿¡æ¯
  getStockBasic(tsCode: string): Promise<StockBasic>;
  
  // Kçº¿æ•°æ® (æ”¯æŒå¤æƒ)
  getKLineData(params: {
    tsCode: string;
    period: 'daily' | 'weekly' | 'monthly';
    adjust: 'qfq' | 'hfq' | 'none';
    startDate: string;
    endDate: string;
  }): Promise<KLineData[]>;
  
  // åˆ†æ—¶æ•°æ®
  getTimeSeriesData(tsCode: string, tradeDate: string): Promise<TimeSeriesData[]>;
  
  // æŠ€æœ¯æŒ‡æ ‡
  getTechnicalIndicators(params: {
    tsCode: string;
    indicators: string[]; // ['macd', 'kdj', 'rsi', 'boll']
    startDate: string;
    endDate: string;
  }): Promise<TechnicalIndicators>;
  
  // èµ„é‡‘æµå‘
  getMoneyFlow(tsCode: string, days: number): Promise<MoneyFlowData[]>;
  
  // ç­¹ç åˆ†å¸ƒ
  getChipDistribution(tsCode: string, tradeDate: string): Promise<ChipData>;
  
  // åŸºæœ¬é¢æ•°æ®
  getFundamentalData(tsCode: string): Promise<FundamentalData>;
  
  // è´¢åŠ¡æŒ‡æ ‡
  getFinancialIndicators(tsCode: string): Promise<FinancialData>;
}

// WebSocketå®æ—¶æ•°æ®æ¥å£
interface RealtimeDataService {
  connect(tsCode: string): void;
  disconnect(): void;
  onPriceUpdate(callback: (data: PriceUpdate) => void): void;
  onOrderBookUpdate(callback: (data: OrderBook) => void): void;
  onTradeUpdate(callback: (data: Trade) => void): void;
}
```

### 3.4 æ•°æ®ç¼“å­˜ç­–ç•¥

```typescript
// ç¼“å­˜é…ç½®
const cacheConfig = {
  // å†…å­˜ç¼“å­˜ (ç”¨äºé«˜é¢‘è®¿é—®æ•°æ®)
  memory: {
    stockBasic: { ttl: 24 * 60 * 60 * 1000 }, // 24å°æ—¶
    klineData: { ttl: 60 * 60 * 1000 },       // 1å°æ—¶
    indicators: { ttl: 30 * 60 * 1000 },      // 30åˆ†é’Ÿ
  },
  // IndexedDBç¼“å­˜ (ç”¨äºå¤§é‡å†å²æ•°æ®)
  indexedDB: {
    klineHistory: { maxAge: 7 * 24 * 60 * 60 * 1000 }, // 7å¤©
    chipData: { maxAge: 24 * 60 * 60 * 1000 },         // 1å¤©
  },
  // è¯·æ±‚å»é‡ (é˜²æ­¢é‡å¤è¯·æ±‚)
  dedup: {
    enabled: true,
    window: 1000, // 1ç§’å†…ç›¸åŒè¯·æ±‚åˆå¹¶
  }
};
```

---

## å››ã€æ¨èæŠ€æœ¯æ ˆ

### 4.1 å›¾è¡¨åº“å¯¹æ¯”ä¸é€‰æ‹©

| å›¾è¡¨åº“ | æ€§èƒ½ | åŠŸèƒ½ä¸°å¯Œåº¦ | å­¦ä¹ æˆæœ¬ | æ¨èæŒ‡æ•° | é€‚ç”¨åœºæ™¯ |
|--------|------|-----------|----------|----------|----------|
| **TradingView Lightweight Charts** | â˜…â˜…â˜…â˜…â˜… | â˜…â˜…â˜…â˜… | â˜…â˜…â˜… | â˜…â˜…â˜…â˜…â˜… | é¦–é€‰ï¼Œä¸“ä¸šé‡‘èå›¾è¡¨ |
| **Apache ECharts** | â˜…â˜…â˜…â˜… | â˜…â˜…â˜…â˜…â˜… | â˜…â˜…â˜… | â˜…â˜…â˜…â˜… | åŠŸèƒ½å…¨é¢ï¼Œç¤¾åŒºæ´»è·ƒ |
| **uPlot** | â˜…â˜…â˜…â˜…â˜… | â˜…â˜…â˜… | â˜…â˜…â˜… | â˜…â˜…â˜…â˜… | è¶…å¤§æ•°æ®é‡ |
| **D3.js** | â˜…â˜…â˜… | â˜…â˜…â˜…â˜…â˜… | â˜…â˜…â˜…â˜…â˜… | â˜…â˜…â˜… | é«˜åº¦è‡ªå®šä¹‰ |
| **ApexCharts** | â˜…â˜…â˜… | â˜…â˜…â˜…â˜… | â˜…â˜… | â˜…â˜…â˜… | ç®€å•åœºæ™¯ |

### 4.2 æ¨èæ–¹æ¡ˆ

**ä¸»é€‰æ–¹æ¡ˆï¼šTradingView Lightweight Charts + ECharts**

```typescript
// å›¾è¡¨åº“åˆ†å·¥
const chartLibraryConfig = {
  // TradingView Lightweight Charts - ç”¨äºKçº¿å›¾å’Œåˆ†æ—¶å›¾
  mainChart: {
    library: 'lightweight-charts',
    version: '^4.1.0',
    reason: 'ä¸“ä¸šé‡‘èå›¾è¡¨ã€æ€§èƒ½ä¼˜ç§€ã€å†…ç½®æŠ€æœ¯æŒ‡æ ‡',
    features: ['candlestick', 'line', 'histogram', 'crosshair', 'tooltip']
  },
  
  // Apache ECharts - ç”¨äºå¤æ‚ç»Ÿè®¡å›¾è¡¨
  statChart: {
    library: 'echarts',
    version: '^5.4.0',
    reason: 'åŠŸèƒ½å…¨é¢ã€ä¸­æ–‡æ–‡æ¡£å®Œå–„ã€å¯è§†åŒ–æ•ˆæœä¸°å¯Œ',
    features: ['bar', 'pie', 'radar', 'heatmap', 'sankey', 'treemap']
  }
};
```

### 4.3 çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ

| æ–¹æ¡ˆ | é€‚ç”¨åœºæ™¯ | å¤æ‚åº¦ | æ¨èåº¦ |
|------|----------|--------|--------|
| **Zustand** | Reacté¡¹ç›® | ä½ | â˜…â˜…â˜…â˜…â˜… |
| **Redux Toolkit** | å¤§å‹é¡¹ç›® | ä¸­ | â˜…â˜…â˜…â˜… |
| **Pinia** | Vueé¡¹ç›® | ä½ | â˜…â˜…â˜…â˜…â˜… |
| **Jotai** | åŸå­åŒ–çŠ¶æ€ | ä½ | â˜…â˜…â˜…â˜… |

**æ¨èï¼šZustand (React) / Pinia (Vue)**

```typescript
// Zustand Store è®¾è®¡
interface StockDetailStore {
  // è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯
  stockBasic: StockBasic | null;
  setStockBasic: (data: StockBasic) => void;
  
  // å›¾è¡¨çŠ¶æ€
  chartPeriod: 'time' | 'day' | 'week' | 'month';
  setChartPeriod: (period: string) => void;
  
  adjustType: 'qfq' | 'hfq' | 'none';
  setAdjustType: (type: string) => void;
  
  // Kçº¿æ•°æ®
  klineData: KLineData[];
  setKlineData: (data: KLineData[]) => void;
  appendKlineData: (data: KLineData[]) => void;
  
  // å®æ—¶æ•°æ®
  realtimePrice: number | null;
  setRealtimePrice: (price: number) => void;
  
  orderBook: OrderBook | null;
  setOrderBook: (data: OrderBook) => void;
  
  // æŠ€æœ¯æŒ‡æ ‡
  activeIndicators: string[];
  toggleIndicator: (indicator: string) => void;
  indicatorData: Record<string, any>;
  setIndicatorData: (indicator: string, data: any) => void;
  
  // å½“å‰Tab
  activeTab: string;
  setActiveTab: (tab: string) => void;
  
  // åŠ è½½çŠ¶æ€
  loading: Record<string, boolean>;
  setLoading: (key: string, loading: boolean) => void;
}

const useStockDetailStore = create<StockDetailStore>((set, get) => ({
  // å®ç°...
}));
```

---

## äº”ã€æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 5.1 æ•°æ®ä¼˜åŒ–

| ä¼˜åŒ–ç­–ç•¥ | å®ç°æ–¹å¼ | é¢„æœŸæ•ˆæœ |
|----------|----------|----------|
| æ•°æ®åˆ†é¡µ | Kçº¿æ•°æ®æŒ‰éœ€åŠ è½½ï¼Œé¦–æ¬¡åŠ è½½200æ¡ | å‡å°‘70%åˆå§‹æ•°æ®é‡ |
| æ•°æ®å‹ç¼© | ä¼ è¾“æ—¶å‹ç¼©Kçº¿æ•°æ®ï¼Œä½¿ç”¨protobuf | å‡å°‘50%ä¼ è¾“ä½“ç§¯ |
| å¢é‡æ›´æ–° | åªè¯·æ±‚æ–°å¢æ•°æ®ï¼Œä¸é‡å¤è·å–å†å² | å‡å°‘80%åç»­è¯·æ±‚ |
| æ•°æ®é¢„å– | é¢„æµ‹ç”¨æˆ·è¡Œä¸ºï¼Œæå‰åŠ è½½å¯èƒ½æ•°æ® | æå‡50%å“åº”é€Ÿåº¦ |
| WebWorker | å¤æ‚è®¡ç®—ç§»è‡³åå°çº¿ç¨‹ | é¿å…UIå¡é¡¿ |

### 5.2 æ¸²æŸ“ä¼˜åŒ–

```typescript
// 1. è™šæ‹Ÿæ»šåŠ¨ (ç”¨äºæˆäº¤æ˜ç»†é•¿åˆ—è¡¨)
const VirtualTradeList = () => {
  // åªæ¸²æŸ“å¯è§†åŒºåŸŸå†…çš„æˆäº¤è®°å½•
};

// 2. å›¾è¡¨æ€§èƒ½ä¼˜åŒ–
const chartOptimization = {
  // æ•°æ®ç‚¹é™åˆ¶
  maxDataPoints: 2000,
  
  // ç®€åŒ–æ¸²æŸ“ (æ•°æ®é‡å¤§æ—¶)
  simplifyWhen: (count: number) => count > 1000,
  
  // é˜²æŠ–å¤„ç†
  debounceResize: 100,
  
  // ç¦ç”¨ä¸å¿…è¦çš„åŠ¨ç”»
  disableAnimation: true,
  
  // ä½¿ç”¨Canvasè€ŒéSVG (å¤§æ•°æ®é‡)
  renderer: 'canvas'
};

// 3. ç»„ä»¶æ‡’åŠ è½½
const MoneyFlowPanel = lazy(() => import('./MoneyFlowPanel'));
const ChipDistributionPanel = lazy(() => import('./ChipDistributionPanel'));
```

### 5.3 ç½‘ç»œä¼˜åŒ–

```typescript
// WebSocketè¿æ¥ç®¡ç†
const wsConfig = {
  // å¿ƒè·³æ£€æµ‹
  heartbeat: {
    enabled: true,
    interval: 30000, // 30ç§’
  },
  
  // è‡ªåŠ¨é‡è¿
  reconnect: {
    enabled: true,
    maxAttempts: 5,
    delay: 3000,
  },
  
  // æ¶ˆæ¯å‹ç¼©
  compression: true,
  
  // æ‰¹é‡æ¨é€
  batchInterval: 100, // 100msæ‰¹é‡æ¨é€
};

// HTTPè¯·æ±‚ä¼˜åŒ–
const httpOptimization = {
  // è¯·æ±‚åˆå¹¶
  requestMerge: true,
  
  // è¯·æ±‚å»é‡
  requestDedup: true,
  
  // æ™ºèƒ½ç¼“å­˜
  smartCache: {
    enabled: true,
    staleWhileRevalidate: true,
  }
};
```

### 5.4 å†…å­˜ä¼˜åŒ–

```typescript
// 1. æ•°æ®æ¸…ç†ç­–ç•¥
const dataCleanup = {
  // ç¦»å¼€é¡µé¢æ¸…ç†
  onUnmount: ['realtimeData', 'orderBook'],
  
  // å®šæ—¶æ¸…ç†
  scheduled: {
    interval: 5 * 60 * 1000, // 5åˆ†é’Ÿ
    maxAge: 10 * 60 * 1000,  // 10åˆ†é’Ÿå‰çš„æ•°æ®
  }
};

// 2. å›¾è¡¨å®ä¾‹ç®¡ç†
const chartInstanceManager = {
  // é”€æ¯ä¸å¯è§å›¾è¡¨
  destroyWhenHidden: true,
  
  // é™åˆ¶åŒæ—¶å­˜åœ¨çš„å›¾è¡¨å®ä¾‹æ•°
  maxInstances: 5,
};
```

---

## å…­ã€å¤æƒå¤„ç†æ–¹æ¡ˆ

### 6.1 å¤æƒè®¡ç®—é€»è¾‘

```typescript
// å¤æƒç±»å‹
enum AdjustType {
  NONE = 'none',    // ä¸å¤æƒ
  QFQ = 'qfq',      // å‰å¤æƒ
  HFQ = 'hfq',      // åå¤æƒ
}

// å¤æƒè®¡ç®—
function calculateAdjustedPrice(
  data: RawKLineData[],
  adjFactors: AdjFactor[],
  adjustType: AdjustType
): KLineData[] {
  if (adjustType === AdjustType.NONE) {
    return data.map(d => ({
      ...d,
      open: d.open,
      high: d.high,
      low: d.low,
      close: d.close,
    }));
  }
  
  // åˆ›å»ºå¤æƒå› å­æ˜ å°„
  const factorMap = new Map(adjFactors.map(f => [f.trade_date, f.adj_factor]));
  
  if (adjustType === AdjustType.QFQ) {
    // å‰å¤æƒï¼šä»¥æœ€æ–°ä»·æ ¼ä¸ºåŸºå‡†
    const latestFactor = adjFactors[adjFactors.length - 1]?.adj_factor || 1;
    return data.map(d => {
      const factor = factorMap.get(d.trade_date) || 1;
      const adjustRatio = factor / latestFactor;
      return {
        ...d,
        open: d.open * adjustRatio,
        high: d.high * adjustRatio,
        low: d.low * adjustRatio,
        close: d.close * adjustRatio,
      };
    });
  } else {
    // åå¤æƒï¼šä»¥æœ€æ—©ä»·æ ¼ä¸ºåŸºå‡†
    const firstFactor = adjFactors[0]?.adj_factor || 1;
    return data.map(d => {
      const factor = factorMap.get(d.trade_date) || 1;
      const adjustRatio = factor / firstFactor;
      return {
        ...d,
        open: d.open * adjustRatio,
        high: d.high * adjustRatio,
        low: d.low * adjustRatio,
        close: d.close * adjustRatio,
      };
    });
  }
}
```

---

## ä¸ƒã€æŠ€æœ¯æŒ‡æ ‡è®¡ç®—

### 7.1 æŒ‡æ ‡æ•°æ®æº

| æŒ‡æ ‡ | æ¥æº | è®¡ç®—æ–¹å¼ |
|------|------|----------|
| MACD | stk_factor / stk_factor_pro | é¢„è®¡ç®— |
| KDJ | stk_factor / stk_factor_pro | é¢„è®¡ç®— |
| RSI | stk_factor / stk_factor_pro | é¢„è®¡ç®— |
| å¸ƒæ—å¸¦ | stk_factor / stk_factor_pro | é¢„è®¡ç®— |
| MAå‡çº¿ | stk_factor_pro | é¢„è®¡ç®— |
| EMA | stk_factor_pro | é¢„è®¡ç®— |
| CCI | stk_factor | é¢„è®¡ç®— |

### 7.2 æŒ‡æ ‡å±•ç¤ºé…ç½®

```typescript
// æŠ€æœ¯æŒ‡æ ‡é…ç½®
const indicatorConfig = {
  macd: {
    name: 'MACD',
    panels: 1, // å ç”¨1ä¸ªå‰¯å›¾
    colors: {
      dif: '#F5A623',    // é»„çº¿
      dea: '#4A90E2',    // è“çº¿
      macd: { up: '#EF5350', down: '#26A69A' } // çº¢æ¶¨ç»¿è·Œ
    },
    height: 120, // å‰¯å›¾é«˜åº¦
  },
  kdj: {
    name: 'KDJ',
    panels: 1,
    colors: {
      k: '#F5A623',
      d: '#4A90E2',
      j: '#9C27B0'
    },
    height: 120,
  },
  rsi: {
    name: 'RSI',
    panels: 1,
    colors: {
      rsi6: '#F5A623',
      rsi12: '#4A90E2',
      rsi24: '#9C27B0'
    },
    height: 120,
  },
  boll: {
    name: 'å¸ƒæ—å¸¦',
    panels: 0, // å åŠ åœ¨ä¸»å›¾ä¸Š
    colors: {
      upper: '#9E9E9E',
      mid: '#F5A623',
      lower: '#9E9E9E'
    }
  }
};
```

---

## å…«ã€å¼€å‘å»ºè®®

### 8.1 ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ components/
â”‚   â””â”€â”€ stock/
â”‚       â”œâ”€â”€ StockHeader/           # è‚¡ç¥¨å¤´éƒ¨
â”‚       â”œâ”€â”€ KLineChart/            # Kçº¿å›¾
â”‚       â”œâ”€â”€ TimeSeriesChart/       # åˆ†æ—¶å›¾
â”‚       â”œâ”€â”€ OrderBook/             # äº”æ¡£ç›˜å£
â”‚       â”œâ”€â”€ TradeDetails/          # æˆäº¤æ˜ç»†
â”‚       â”œâ”€â”€ MoneyFlowPanel/        # èµ„é‡‘æµå‘
â”‚       â”œâ”€â”€ ChipDistribution/      # ç­¹ç åˆ†å¸ƒ
â”‚       â”œâ”€â”€ FundamentalPanel/      # åŸºæœ¬é¢
â”‚       â”œâ”€â”€ FinancialPanel/        # è´¢åŠ¡æŒ‡æ ‡
â”‚       â””â”€â”€ NewsPanel/             # æ–°é—»å…¬å‘Š
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useStockData.ts            # è‚¡ç¥¨æ•°æ®Hook
â”‚   â”œâ”€â”€ useRealtimeData.ts         # å®æ—¶æ•°æ®Hook
â”‚   â”œâ”€â”€ useKLineData.ts            # Kçº¿æ•°æ®Hook
â”‚   â””â”€â”€ useTechnicalIndicators.ts  # æŠ€æœ¯æŒ‡æ ‡Hook
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ stockApi.ts                # è‚¡ç¥¨API
â”‚   â”œâ”€â”€ websocketService.ts        # WebSocketæœåŠ¡
â”‚   â””â”€â”€ cacheService.ts            # ç¼“å­˜æœåŠ¡
â”œâ”€â”€ stores/
â”‚   â””â”€â”€ stockDetailStore.ts        # çŠ¶æ€ç®¡ç†
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ adjustCalculation.ts       # å¤æƒè®¡ç®—
â”‚   â”œâ”€â”€ chartHelpers.ts            # å›¾è¡¨è¾…åŠ©å‡½æ•°
â”‚   â””â”€â”€ dataFormatter.ts           # æ•°æ®æ ¼å¼åŒ–
â””â”€â”€ types/
    â””â”€â”€ stock.ts                   # ç±»å‹å®šä¹‰
```

### 8.2 å…³é”®å®ç°è¦ç‚¹

1. **Kçº¿å›¾å®ç°**ï¼šä½¿ç”¨ TradingView Lightweight Chartsï¼Œæ”¯æŒå¤šå‘¨æœŸåˆ‡æ¢å’Œå¤æƒ
2. **å®æ—¶æ•°æ®**ï¼šWebSocketè¿æ¥ï¼Œæ”¯æŒè‡ªåŠ¨é‡è¿å’Œå¿ƒè·³æ£€æµ‹
3. **æ•°æ®ç¼“å­˜**ï¼šå¤šå±‚ç¼“å­˜ç­–ç•¥ï¼ˆå†…å­˜ + IndexedDBï¼‰
4. **æ€§èƒ½ä¼˜åŒ–**ï¼šè™šæ‹Ÿæ»šåŠ¨ã€æ•°æ®åˆ†é¡µã€å›¾è¡¨å®ä¾‹ç®¡ç†
5. **å“åº”å¼è®¾è®¡**ï¼šé€‚é…æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯

---

## ä¹ã€æ•°æ®è¡¨æ˜ å°„å…³ç³»

### 9.1 æ•°æ®è¡¨ä¸ç»„ä»¶å¯¹åº”å…³ç³»

| æ•°æ®è¡¨ | ç”¨é€” | å¯¹åº”ç»„ä»¶ |
|--------|------|----------|
| daily | Kçº¿æ•°æ®ã€åˆ†æ—¶æ•°æ® | KLineChart, TimeSeriesChart |
| stk_factor | æŠ€æœ¯æŒ‡æ ‡ | SubIndicatorChart |
| stk_factor_pro | é«˜çº§æŠ€æœ¯æŒ‡æ ‡ | SubIndicatorChart |
| daily_basic | åŸºæœ¬é¢æ•°æ® | FundamentalPanel |
| moneyflow | èµ„é‡‘æµå‘ | MoneyFlowPanel |
| moneyflow_dc | èµ„é‡‘æµå‘ç®€åŒ–ç‰ˆ | MoneyFlowPanel |
| cyq_chips | ç­¹ç åˆ†å¸ƒæ•°æ® | ChipDistributionPanel |
| cyq_perf | ç­¹ç èƒœç‡æ•°æ® | ChipDistributionPanel |
| adj_factor | å¤æƒå› å­ | KLineChart (å¤æƒè®¡ç®—) |
| stock_basic | è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ | StockHeader |
| fina_indicator | è´¢åŠ¡æŒ‡æ ‡ | FinancialPanel |

### 9.2 æ•°æ®è·å–é¢‘ç‡å»ºè®®

| æ•°æ®ç±»å‹ | æ›´æ–°é¢‘ç‡ | å»ºè®®è·å–ç­–ç•¥ |
|----------|----------|--------------|
| æ—¥çº¿è¡Œæƒ… | æ¯æ—¥æ”¶ç›˜å | å¢é‡æ›´æ–°ï¼Œç¼“å­˜1å¤© |
| æŠ€æœ¯æŒ‡æ ‡ | æ¯æ—¥æ”¶ç›˜å | éšæ—¥çº¿æ•°æ®ä¸€èµ·æ›´æ–° |
| å®æ—¶è¡Œæƒ… | å®æ—¶(ç§’çº§) | WebSocketæ¨é€ |
| ç›˜å£æ•°æ® | å®æ—¶(æ¯«ç§’çº§) | WebSocketæ¨é€ |
| èµ„é‡‘æµå‘ | æ¯æ—¥æ”¶ç›˜å | Tabåˆ‡æ¢æ—¶è·å– |
| ç­¹ç åˆ†å¸ƒ | æ¯æ—¥æ”¶ç›˜å | Tabåˆ‡æ¢æ—¶è·å– |
| åŸºæœ¬é¢æ•°æ® | æ¯æ—¥æ”¶ç›˜å | Tabåˆ‡æ¢æ—¶è·å– |
| è´¢åŠ¡æŒ‡æ ‡ | å­£åº¦æ›´æ–° | é•¿æœŸç¼“å­˜ |

---

## åã€æ€»ç»“

æœ¬è®¾è®¡æ–¹æ¡ˆåŸºäºtushareæä¾›çš„11ä¸ªæ ¸å¿ƒæ•°æ®è¡¨ï¼Œè®¾è®¡äº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€æ€§èƒ½ä¼˜ç§€çš„ä¸ªè‚¡è¯¦æƒ…é¡µæ¨¡å—ã€‚ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š

1. **ä¸“ä¸šå›¾è¡¨å±•ç¤º**ï¼šæ”¯æŒKçº¿å›¾ã€åˆ†æ—¶å›¾ã€å¤šç§æŠ€æœ¯æŒ‡æ ‡
2. **å®æ—¶æ•°æ®æ¨é€**ï¼šWebSocketå®ç°ç›˜å£ã€æˆäº¤æ˜ç»†å®æ—¶æ›´æ–°
3. **æ™ºèƒ½æ•°æ®ç¼“å­˜**ï¼šå¤šå±‚ç¼“å­˜ç­–ç•¥ï¼Œå¹³è¡¡å®æ—¶æ€§ä¸æ€§èƒ½
4. **å“åº”å¼è®¾è®¡**ï¼šé€‚é…æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯å¤šç§å±å¹•å°ºå¯¸
5. **æ¨¡å—åŒ–æ¶æ„**ï¼šç»„ä»¶èŒè´£æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•
