# AIè¡Œæƒ…åˆ†ææ¨¡å—æ¶æ„è®¾è®¡

## 1. æ¨¡å—æ¶æ„æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           AIè¡Œæƒ…åˆ†ææ¨¡å— (AI Analysis Module)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ è¡Œæƒ…è¯Šæ–­    â”‚  â”‚ ç ”æŠ¥è§£è¯»    â”‚  â”‚ èˆ†æƒ…åˆ†æ    â”‚  â”‚ è¶‹åŠ¿é¢„æµ‹    â”‚            â”‚
â”‚  â”‚ Diagnosis   â”‚  â”‚ Research    â”‚  â”‚ Sentiment   â”‚  â”‚ Prediction  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ é£é™©æç¤º    â”‚  â”‚ æ™ºèƒ½é—®ç­”    â”‚  â”‚ ä¸ªæ€§æ¨è    â”‚  â”‚ ç»¼åˆåˆ†æ    â”‚            â”‚
â”‚  â”‚ Risk Alert  â”‚  â”‚ Q&A Bot     â”‚  â”‚ Recommendationâ”‚  â”‚ Portfolio   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                    â”‚                                            â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚                         â”‚   AIç¼–æ’å±‚ (Orchestrator)                            â”‚
â”‚                         â”‚   - ä»»åŠ¡åˆ†å‘          â”‚                               â”‚
â”‚                         â”‚   - ç»“æœèšåˆ          â”‚                               â”‚
â”‚                         â”‚   - å¯ä¿¡åº¦è¯„ä¼°        â”‚                               â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚                         â”‚   æ¨¡å‹ç®¡ç†å±‚ (Model Manager)                          â”‚
â”‚                         â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                                 â”‚
â”‚                         â”‚   â”‚ OpenAI API    â”‚ â”‚                                 â”‚
â”‚                         â”‚   â”‚ Claude API    â”‚ â”‚                                 â”‚
â”‚                         â”‚   â”‚ Local LLM     â”‚ â”‚                                 â”‚
â”‚                         â”‚   â”‚ Embedding     â”‚ â”‚                                 â”‚
â”‚                         â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                                 â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ æ•°æ®é¢„å¤„ç†  â”‚  â”‚ ç‰¹å¾å·¥ç¨‹    â”‚  â”‚ å‘é‡å­˜å‚¨    â”‚  â”‚ ç¼“å­˜å±‚      â”‚            â”‚
â”‚  â”‚ Preprocess  â”‚  â”‚ Feature Eng â”‚  â”‚ Vector DB   â”‚  â”‚ Cache       â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 2. æ ¸å¿ƒç»„ä»¶è®¾è®¡

### 2.1 AIè¡Œæƒ…è¯Šæ–­å¼•æ“ (Market Diagnosis Engine)

**åŠŸèƒ½å®šä½**ï¼šç»¼åˆåˆ†ææŠ€æœ¯é¢ã€åŸºæœ¬é¢ã€èµ„é‡‘é¢ï¼Œç”Ÿæˆè‚¡ç¥¨å¥åº·è¯Šæ–­æŠ¥å‘Š

**è¾“å…¥æ•°æ®**ï¼š
```python
class DiagnosisInput:
    # æŠ€æœ¯é¢æ•°æ® (stk_factor + daily)
    technical: {
        "macd": {"signal": "bullish/bearish/neutral", "value": float},
        "kdj": {"k": float, "d": float, "j": float, "signal": str},
        "rsi": {"6d": float, "12d": float, "24d": float, "level": str},
        "boll": {"upper": float, "middle": float, "lower": float, "position": str},
        "trend": {"short": str, "medium": str, "long": str}
    }
    
    # åŸºæœ¬é¢æ•°æ® (fina_indicator)
    fundamental: {
        "eps": float,
        "roe": float,
        "roa": float,
        "gross_margin": float,
        "debt_ratio": float,
        "revenue_growth": float,
        "profit_growth": float
    }
    
    # èµ„é‡‘é¢æ•°æ® (moneyflow + top_list)
    capital: {
        "net_inflow_5d": float,
        "net_inflow_20d": float,
        "main_force": str,  # ä¸»åŠ›åŠ¨å‘
        "retail_sentiment": str,
        "dragon_tiger": bool  # æ˜¯å¦ä¸Šé¾™è™æ¦œ
    }
```

**è¯Šæ–­è¾“å‡º**ï¼š
```python
class DiagnosisResult:
    overall_score: float  # 0-100ç»¼åˆè¯„åˆ†
    overall_rating: str   # å¼ºçƒˆæ¨è/æ¨è/ä¸­æ€§/å›é¿/å¼ºçƒˆå›é¿
    
    technical_analysis: {
        "score": float,
        "summary": str,
        "key_signals": List[str],
        "support_resistance": {"support": float, "resistance": float}
    }
    
    fundamental_analysis: {
        "score": float,
        "summary": str,
        "strengths": List[str],
        "concerns": List[str],
        "peer_comparison": str
    }
    
    capital_analysis: {
        "score": float,
        "summary": str,
        "flow_trend": str,
        "institutional_activity": str
    }
    
    confidence_level: float  # å¯ä¿¡åº¦ 0-1
    analysis_date: str
    next_review: str
```

**Promptæ¨¡æ¿**ï¼š
```
ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„è‚¡ç¥¨åˆ†æå¸ˆï¼Œè¯·åŸºäºä»¥ä¸‹æ•°æ®å¯¹{stock_name}({stock_code})è¿›è¡Œç»¼åˆè¯Šæ–­åˆ†æï¼š

ã€æŠ€æœ¯é¢æ•°æ®ã€‘
- MACD: {macd_signal}, æ•°å€¼: {macd_value}
- KDJ: K={k}, D={d}, J={j}
- RSI: 6æ—¥={rsi6}, 12æ—¥={rsi12}, 24æ—¥={rsi24}
- å¸ƒæ—å¸¦: è‚¡ä»·ä½äº{boll_position}
- è¶‹åŠ¿: çŸ­æœŸ{short_trend}, ä¸­æœŸ{medium_trend}, é•¿æœŸ{long_trend}

ã€åŸºæœ¬é¢æ•°æ®ã€‘
- EPS: {eps}, ROE: {roe}%, ROA: {roa}%
- æ¯›åˆ©ç‡: {gross_margin}%
- è¥æ”¶å¢é•¿ç‡: {revenue_growth}%
- å‡€åˆ©æ¶¦å¢é•¿ç‡: {profit_growth}%

ã€èµ„é‡‘é¢æ•°æ®ã€‘
- 5æ—¥å‡€æµå…¥: {net_inflow_5d}ä¸‡å…ƒ
- 20æ—¥å‡€æµå…¥: {net_inflow_20d}ä¸‡å…ƒ
- ä¸»åŠ›åŠ¨å‘: {main_force}

è¯·è¾“å‡ºï¼š
1. ç»¼åˆè¯„åˆ†(0-100)å’ŒæŠ•èµ„å»ºè®®
2. æŠ€æœ¯é¢åˆ†ææ‘˜è¦(3-5ä¸ªå…³é”®ä¿¡å·)
3. åŸºæœ¬é¢åˆ†ææ‘˜è¦(ä¼˜åŠ¿å’Œå…³æ³¨ç‚¹)
4. èµ„é‡‘é¢åˆ†ææ‘˜è¦
5. å…³é”®æ”¯æ’‘ä½å’Œé˜»åŠ›ä½
6. å¯ä¿¡åº¦è¯„ä¼°(é«˜/ä¸­/ä½)
```

### 2.2 æ™ºèƒ½ç ”æŠ¥è§£è¯»å¼•æ“ (Research Report Analyzer)

**åŠŸèƒ½å®šä½**ï¼šè‡ªåŠ¨è§£æå–æ–¹ç ”æŠ¥ï¼Œæå–å…³é”®è§‚ç‚¹å’ŒæŠ•èµ„é€»è¾‘

**è¾“å…¥æ•°æ®**ï¼š
```python
class ReportInput:
    ts_code: str
    report_date: str
    report_title: str
    org_name: str
    rating: str          # è¯„çº§
    target_price: float  # ç›®æ ‡ä»·
    np_forecast: float   # å‡€åˆ©æ¶¦é¢„æµ‹
    eps_forecast: float  # EPSé¢„æµ‹
```

**å¤„ç†æµç¨‹**ï¼š
1. **æ•°æ®èšåˆ**ï¼šè·å–è¿‘30å¤©æ‰€æœ‰ç›¸å…³ç ”æŠ¥
2. **è§‚ç‚¹æå–**ï¼šä½¿ç”¨LLMæå–æ ¸å¿ƒæŠ•èµ„é€»è¾‘
3. **ä¸€è‡´æ€§åˆ†æ**ï¼šåˆ†æå¤šå®¶æœºæ„è§‚ç‚¹ä¸€è‡´æ€§
4. **å†å²å‡†ç¡®ç‡**ï¼šç»“åˆæœºæ„å†å²é¢„æµ‹å‡†ç¡®ç‡åŠ æƒ

**è¾“å‡ºç»“æ„**ï¼š
```python
class ReportAnalysis:
    consensus_rating: str      # ä¸€è‡´è¯„çº§
    rating_distribution: Dict  # è¯„çº§åˆ†å¸ƒ
    avg_target_price: float    # å¹³å‡ç›®æ ‡ä»·
    upside_potential: float    # ä¸Šæ¶¨ç©ºé—´
    
    key_themes: List[str]      # æ ¸å¿ƒæŠ•èµ„ä¸»é¢˜
    bull_points: List[str]     # çœ‹å¤šç†ç”±
    bear_points: List[str]     # çœ‹ç©ºç†ç”±
    
    org_accuracy: Dict         # æœºæ„å†å²å‡†ç¡®ç‡
    confidence_score: float    # ç ”æŠ¥å¯ä¿¡åº¦
    
    summary: str               # ç»¼åˆæ‘˜è¦
```

### 2.3 èˆ†æƒ…æƒ…ç»ªåˆ†æå¼•æ“ (Sentiment Analyzer)

**åŠŸèƒ½å®šä½**ï¼šåˆ†æå¸‚åœºèˆ†æƒ…ï¼Œè¯†åˆ«æƒ…ç»ªæ‹ç‚¹

**æ•°æ®æ¥æº**ï¼š
- æ–°é—»èµ„è®¯ï¼ˆéœ€å¤–éƒ¨æ¥å…¥ï¼‰
- ç¤¾äº¤åª’ä½“æƒ…ç»ªï¼ˆéœ€å¤–éƒ¨æ¥å…¥ï¼‰
- é¾™è™æ¦œæ•°æ®ï¼ˆtop_listï¼‰
- æœºæ„è°ƒç ”æ•°æ®ï¼ˆstk_survï¼‰

**åˆ†æç»´åº¦**ï¼š
```python
class SentimentAnalysis:
    overall_sentiment: str     # æåº¦ä¹è§‚/ä¹è§‚/ä¸­æ€§/æ‚²è§‚/æåº¦æ‚²è§‚
    sentiment_score: float     # -1 åˆ° 1
    sentiment_trend: str       # ä¸Šå‡/ä¸‹é™/éœ‡è¡
    
    news_sentiment: {
        "score": float,
        "volume": int,         # æ–°é—»é‡
        "hot_topics": List[str]
    }
    
    institutional_sentiment: {
        "survey_activity": str,    # è°ƒç ”æ´»è·ƒåº¦
        "fund_flow": str,          # èµ„é‡‘æµå‘æƒ…ç»ª
        "dragon_tiger_sentiment": str
    }
    
    extreme_signals: List[str]  # æç«¯æƒ…ç»ªä¿¡å·
    contrarian_opportunity: bool # åå‘æ“ä½œæœºä¼š
```

### 2.4 è¶‹åŠ¿é¢„æµ‹å¼•æ“ (Trend Prediction Engine)

**åŠŸèƒ½å®šä½**ï¼šåŸºäºå¤šå› å­æ¨¡å‹é¢„æµ‹çŸ­æœŸ/ä¸­æœŸè¶‹åŠ¿

**é¢„æµ‹æ¨¡å‹**ï¼š
```python
class TrendPrediction:
    # çŸ­æœŸé¢„æµ‹ (1-5äº¤æ˜“æ—¥)
    short_term: {
        "direction": str,      # ä¸Šæ¶¨/ä¸‹è·Œ/éœ‡è¡
        "probability": float,  # æ¦‚ç‡
        "target_range": {"low": float, "high": float},
        "key_factors": List[str],
        "uncertainty": str     # ä¸ç¡®å®šæ€§è¯´æ˜
    }
    
    # ä¸­æœŸé¢„æµ‹ (1-4å‘¨)
    medium_term: {
        "direction": str,
        "probability": float,
        "target_range": {"low": float, "high": float},
        "catalysts": List[str],
        "risks": List[str],
        "uncertainty": str
    }
    
    # é•¿æœŸé¢„æµ‹ (1-6æœˆ) - ä»…åŸºäºåŸºæœ¬é¢
    long_term: {
        "fair_value": float,
        "valuation_opinion": str,
        "uncertainty": str
    }
    
    # é¢„æµ‹å¯ä¿¡åº¦
    confidence_metrics: {
        "model_accuracy": float,    # å†å²å›æµ‹å‡†ç¡®ç‡
        "data_quality": float,      # æ•°æ®è´¨é‡è¯„åˆ†
        "market_regime": str,       # å¸‚åœºç¯å¢ƒ
        "overall_confidence": float # ç»¼åˆå¯ä¿¡åº¦
    }
```

**ä¸ç¡®å®šæ€§æ ‡æ³¨è§„åˆ™**ï¼š
- **é«˜å¯ä¿¡åº¦** (0.8-1.0)ï¼šæ•°æ®å®Œæ•´ã€è¶‹åŠ¿æ˜ç¡®ã€æ¨¡å‹å†å²å‡†ç¡®ç‡é«˜
- **ä¸­ç­‰å¯ä¿¡åº¦** (0.5-0.8)ï¼šéƒ¨åˆ†æ•°æ®ç¼ºå¤±æˆ–å¸‚åœºéœ‡è¡
- **ä½å¯ä¿¡åº¦** (0-0.5)ï¼šé‡å¤§äº‹ä»¶ pendingã€æ•°æ®è´¨é‡å·®ã€æ¨¡å‹å¤±æ•ˆæœŸ

### 2.5 é£é™©æç¤ºå¼•æ“ (Risk Alert Engine)

**åŠŸèƒ½å®šä½**ï¼šå®æ—¶ç›‘æ§å¹¶é¢„è­¦æ½œåœ¨é£é™©

**é£é™©ç±»å‹**ï¼š
```python
class RiskAlert:
    risk_level: str            # é«˜/ä¸­/ä½
    risk_type: str             # æŠ€æœ¯é£é™©/åŸºæœ¬é¢é£é™©/èµ„é‡‘é£é™©/ç³»ç»Ÿæ€§é£é™©
    
    technical_risks: List[{
        "indicator": str,      # æŒ‡æ ‡åç§°
        "condition": str,      # è§¦å‘æ¡ä»¶
        "severity": str        # ä¸¥é‡ç¨‹åº¦
    }]
    
    fundamental_risks: List[{
        "aspect": str,         # åŸºæœ¬é¢ç»´åº¦
        "change": str,         # å˜åŒ–æè¿°
        "impact": str          # å½±å“è¯„ä¼°
    }]
    
    capital_risks: List[{
        "type": str,           # é£é™©ç±»å‹
        "description": str,
        "threshold": float     # è§¦å‘é˜ˆå€¼
    }]
    
    recommended_action: str    # å»ºè®®æ“ä½œ
```

**è‡ªåŠ¨é¢„è­¦è§¦å‘æ¡ä»¶**ï¼š
| é£é™©ç±»å‹ | è§¦å‘æ¡ä»¶ | é¢„è­¦çº§åˆ« |
|---------|---------|---------|
| æŠ€æœ¯ç ´ä½ | æ”¶ç›˜ä»·è·Œç ´BOLLä¸‹è½¨+æ”¾é‡ | é«˜ |
| èµ„é‡‘å‡ºé€ƒ | è¿ç»­5æ—¥ä¸»åŠ›å‡€æµå‡º>5000ä¸‡ | é«˜ |
| ä¸šç»©å˜è„¸ | é¢„å‘Šå‡€åˆ©æ¶¦ä¸‹ä¿®>30% | é«˜ |
| è¯„çº§ä¸‹è°ƒ | å¤šå®¶æœºæ„ä¸‹è°ƒè¯„çº§ | ä¸­ |
| ç­¹ç æ¾åŠ¨ | ç­¹ç é›†ä¸­åº¦å¿«é€Ÿä¸‹é™ | ä¸­ |
| èˆ†æƒ…æ¶åŒ– | è´Ÿé¢æ–°é—»æ¿€å¢ | ä¸­ |

### 2.6 æ™ºèƒ½é—®ç­”åŠ©æ‰‹ (AI Q&A Assistant)

**åŠŸèƒ½å®šä½**ï¼šè‡ªç„¶è¯­è¨€äº¤äº’ï¼Œå›ç­”æŠ•èµ„ç›¸å…³é—®é¢˜

**æ”¯æŒåœºæ™¯**ï¼š
1. **æ•°æ®æŸ¥è¯¢**ï¼š"è´µå·èŒ…å°æœ€è¿‘5æ—¥çš„èµ„é‡‘æµå‘"
2. **è¯Šæ–­è¯¢é—®**ï¼š"åˆ†æä¸€ä¸‹æ¯”äºšè¿ªçš„æŠ€æœ¯é¢"
3. **å¯¹æ¯”åˆ†æ**ï¼š"å®å¾·æ—¶ä»£å’Œæ¯”äºšè¿ªå“ªä¸ªæ›´å¥½"
4. **æ¦‚å¿µè§£é‡Š**ï¼š"ä»€ä¹ˆæ˜¯MACDé‡‘å‰"
5. **ç­–ç•¥å»ºè®®**ï¼š"ç°åœ¨é€‚åˆä¹°å…¥å—"

**æ¶æ„è®¾è®¡**ï¼š
```python
class QASystem:
    # æ„å›¾è¯†åˆ«
    intent_classifier: {
        "query_data": "æ•°æ®æŸ¥è¯¢",
        "request_analysis": "è¯·æ±‚åˆ†æ",
        "compare_stocks": "è‚¡ç¥¨å¯¹æ¯”",
        "explain_concept": "æ¦‚å¿µè§£é‡Š",
        "seek_advice": "å¯»æ±‚å»ºè®®",
        "general_chat": "ä¸€èˆ¬å¯¹è¯"
    }
    
    # ä¸Šä¸‹æ–‡ç®¡ç†
    context_manager: {
        "session_history": List,
        "mentioned_stocks": List,
        "user_preferences": Dict
    }
    
    # å›ç­”ç”Ÿæˆ
    response_generator: {
        "data_query_handler": Handler,
        "analysis_handler": Handler,
        "comparison_handler": Handler,
        "concept_handler": Handler,
        "advice_handler": Handler
    }
```

### 2.7 ä¸ªæ€§åŒ–æ¨èå¼•æ“ (Recommendation Engine)

**åŠŸèƒ½å®šä½**ï¼šåŸºäºç”¨æˆ·ç”»åƒå’ŒæŠ•èµ„åå¥½æ¨èè‚¡ç¥¨

**ç”¨æˆ·ç”»åƒç»´åº¦**ï¼š
```python
class UserProfile:
    risk_appetite: str         # é£é™©åå¥½
    investment_style: str      # æŠ•èµ„é£æ ¼
    holding_period: str        # æŒä»“å‘¨æœŸ
    preferred_sectors: List    # åå¥½è¡Œä¸š
    avoided_sectors: List      # å›é¿è¡Œä¸š
    
    watchlist: List            # è‡ªé€‰è‚¡
    portfolio: Dict            # å½“å‰æŒä»“
    trade_history: List        # äº¤æ˜“å†å²
    
    ai_interactions: List      # AIäº¤äº’å†å²
    feedback_scores: Dict      # åé¦ˆè¯„åˆ†
```

**æ¨èç®—æ³•**ï¼š
```python
class RecommendationEngine:
    # ç›¸ä¼¼ç”¨æˆ·æ¨è
    collaborative_filtering(stock_embeddings, user_embeddings)
    
    # åŸºäºå†…å®¹æ¨è
    content_based(user_profile, stock_features)
    
    # å¤šå› å­è¯„åˆ†
    multi_factor_scoring(stock_pool, user_profile)
    
    # æ¨èç»“æœ
    recommendations: List[{
        "ts_code": str,
        "name": str,
        "match_score": float,
        "reason": str,
        "risk_level": str
    }]
```

## 3. æ•°æ®æµè®¾è®¡

### 3.1 æ•´ä½“æ•°æ®æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              æ•°æ®è¾“å…¥å±‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ æ—¥çº¿æ•°æ® â”‚ â”‚ æŠ€æœ¯å› å­ â”‚ â”‚ è´¢åŠ¡æŒ‡æ ‡ â”‚ â”‚ èµ„é‡‘æµå‘ â”‚ â”‚ ç ”æŠ¥æ•°æ® â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚           â”‚           â”‚           â”‚           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  æ•°æ®é¢„å¤„ç†å±‚  â”‚
                    â”‚  - æ•°æ®æ¸…æ´—    â”‚
                    â”‚  - ç¼ºå¤±å€¼å¤„ç†  â”‚
                    â”‚  - å¼‚å¸¸å€¼æ£€æµ‹  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  ç‰¹å¾å·¥ç¨‹å±‚    â”‚
                    â”‚  - æŠ€æœ¯æŒ‡æ ‡è®¡ç®—â”‚
                    â”‚  - åŸºæœ¬é¢è¯„åˆ†  â”‚
                    â”‚  - èµ„é‡‘æµå‘ç‰¹å¾â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
â”‚  å‘é‡å­˜å‚¨å±‚   â”‚  â”‚   AIåˆ†æå¼•æ“å±‚   â”‚  â”‚   ç¼“å­˜å±‚    â”‚
â”‚  - ç ”æŠ¥å‘é‡   â”‚  â”‚  - è¡Œæƒ…è¯Šæ–­     â”‚  â”‚  - ç»“æœç¼“å­˜ â”‚
â”‚  - å†å²åˆ†æ   â”‚  â”‚  - è¶‹åŠ¿é¢„æµ‹     â”‚  â”‚  - å‘é‡ç¼“å­˜ â”‚
â”‚  - çŸ¥è¯†åº“    â”‚  â”‚  - é£é™©é¢„è­¦     â”‚  â”‚  - ä¼šè¯ç¼“å­˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   ç»“æœè¾“å‡ºå±‚   â”‚
                    â”‚  - APIå“åº”    â”‚
                    â”‚  - å¯è§†åŒ–å±•ç¤º â”‚
                    â”‚  - æ¨é€é€šçŸ¥   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 å®æ—¶æ•°æ®æµ vs æ‰¹å¤„ç†æ•°æ®æµ

**å®æ—¶æ•°æ®æµ**ï¼ˆç”¨äºé£é™©æç¤ºã€èµ„é‡‘ç›‘æ§ï¼‰ï¼š
```python
# å®æ—¶æ•°æ®ç®¡é“
real_time_pipeline = {
    "data_sources": ["moneyflow", "top_list", "daily"],
    "update_frequency": "5åˆ†é’Ÿ",
    "processing": "æµå¼å¤„ç†",
    "use_cases": ["é£é™©é¢„è­¦", "èµ„é‡‘å¼‚åŠ¨", "é¾™è™æ¦œç›‘æ§"]
}
```

**æ‰¹å¤„ç†æ•°æ®æµ**ï¼ˆç”¨äºæ·±åº¦åˆ†æã€ç ”æŠ¥è§£è¯»ï¼‰ï¼š
```python
# æ‰¹å¤„ç†æ•°æ®ç®¡é“
batch_pipeline = {
    "data_sources": ["fina_indicator", "report_rc", "stk_factor"],
    "update_frequency": "æ¯æ—¥æ”¶ç›˜å",
    "processing": "å®šæ—¶ä»»åŠ¡",
    "use_cases": ["è¡Œæƒ…è¯Šæ–­", "ç ”æŠ¥è§£è¯»", "è¶‹åŠ¿é¢„æµ‹"]
}
```

## 4. æ¨¡å‹é›†æˆæ–¹æ¡ˆ

### 4.1 æ¨¡å‹é€‰æ‹©ç­–ç•¥

| åŠŸèƒ½æ¨¡å— | æ¨èæ¨¡å‹ | å¤‡é€‰æ–¹æ¡ˆ | é€‰æ‹©ç†ç”± |
|---------|---------|---------|---------|
| è¡Œæƒ…è¯Šæ–­ | GPT-4 / Claude-3 | GPT-3.5-Turbo | å¤æ‚æ¨ç†ã€å¤šç»´åº¦åˆ†æ |
| ç ”æŠ¥è§£è¯» | GPT-4 | Claude-3 | é•¿æ–‡æœ¬ç†è§£ã€è§‚ç‚¹æå– |
| èˆ†æƒ…åˆ†æ | GPT-3.5-Turbo | æœ¬åœ°æ¨¡å‹ | æˆæœ¬æ•æ„Ÿã€é«˜é¢‘è°ƒç”¨ |
| è¶‹åŠ¿é¢„æµ‹ | ä¸“ç”¨æ¨¡å‹+LLM | çº¯è§„åˆ™ | éœ€è¦é‡åŒ–+è§£é‡Šæ€§ |
| æ™ºèƒ½é—®ç­” | GPT-4 | Claude-3 | å¤šè½®å¯¹è¯ã€ä¸Šä¸‹æ–‡ç†è§£ |
| ä¸ªæ€§æ¨è | Embeddingæ¨¡å‹ | ååŒè¿‡æ»¤ | å‘é‡ç›¸ä¼¼åº¦è®¡ç®— |

### 4.2 æ¨¡å‹è°ƒç”¨æ¶æ„

```python
class ModelManager:
    """æ¨¡å‹ç®¡ç†å™¨ - ç»Ÿä¸€æ¥å£ç®¡ç†å¤šç§æ¨¡å‹"""
    
    def __init__(self):
        self.models = {
            "openai": OpenAIAdapter(api_key=OPENAI_KEY),
            "anthropic": ClaudeAdapter(api_key=ANTHROPIC_KEY),
            "local": LocalLLMAdapter(model_path=LOCAL_MODEL),
            "embedding": EmbeddingAdapter(model="text-embedding-3-small")
        }
    
    async def generate(
        self, 
        prompt: str, 
        model_type: str = "openai",
        model_name: str = "gpt-4",
        temperature: float = 0.7,
        max_tokens: int = 2000,
        **kwargs
    ) -> str:
        """ç»Ÿä¸€ç”Ÿæˆæ¥å£"""
        adapter = self.models.get(model_type)
        return await adapter.generate(
            prompt, model_name, temperature, max_tokens, **kwargs
        )
    
    async def embed(self, texts: List[str]) -> List[List[float]]:
        """æ–‡æœ¬å‘é‡åŒ–"""
        return await self.models["embedding"].embed(texts)
    
    def route_by_complexity(self, task: Task) -> ModelConfig:
        """æ ¹æ®ä»»åŠ¡å¤æ‚åº¦è·¯ç”±åˆ°åˆé€‚çš„æ¨¡å‹"""
        if task.complexity == "high":
            return ModelConfig("openai", "gpt-4", temperature=0.3)
        elif task.complexity == "medium":
            return ModelConfig("openai", "gpt-3.5-turbo", temperature=0.5)
        else:
            return ModelConfig("local", "qwen-7b", temperature=0.7)
```

### 4.3 æˆæœ¬ä¼˜åŒ–ç­–ç•¥

```python
class CostOptimizer:
    """æˆæœ¬ä¼˜åŒ–å™¨"""
    
    def __init__(self):
        self.token_usage = TokenTracker()
        self.cache = SmartCache()
    
    async def optimize_call(
        self, 
        prompt: str, 
        required_quality: str = "high"
    ) -> Tuple[str, float]:
        """
        ä¼˜åŒ–æ¨¡å‹è°ƒç”¨ï¼Œå¹³è¡¡æˆæœ¬å’Œè´¨é‡
        """
        # 1. æ£€æŸ¥ç¼“å­˜
        cached = await self.cache.get(prompt)
        if cached:
            return cached, 0.0
        
        # 2. æ ¹æ®è´¨é‡è¦æ±‚é€‰æ‹©æ¨¡å‹
        if required_quality == "high":
            model = "gpt-4"
            cost_per_1k = 0.03
        elif required_quality == "medium":
            model = "gpt-3.5-turbo"
            cost_per_1k = 0.002
        else:
            model = "local-llm"
            cost_per_1k = 0.0
        
        # 3. å‹ç¼©prompt
        compressed_prompt = self.compress_prompt(prompt)
        
        # 4. è°ƒç”¨æ¨¡å‹
        result = await self.call_model(compressed_prompt, model)
        
        # 5. ç¼“å­˜ç»“æœ
        await self.cache.set(prompt, result, ttl=3600)
        
        return result, self.calculate_cost(compressed_prompt, result, cost_per_1k)
    
    def compress_prompt(self, prompt: str) -> str:
        """å‹ç¼©promptï¼Œå‡å°‘token"""
        # ç§»é™¤å†—ä½™ç©ºæ ¼
        # ç®€åŒ–æ•°å­—æ ¼å¼
        # æå–å…³é”®ä¿¡æ¯
        pass
```

## 5. åˆ†æç»“æœå±•ç¤ºæ–¹å¼

### 5.1 è¡Œæƒ…è¯Šæ–­å±•ç¤º

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AIè¡Œæƒ…è¯Šæ–­ - è´µå·èŒ…å°(600519)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚   ç»¼åˆè¯„åˆ†: 78/100    æŠ•èµ„å»ºè®®: æ¨èæŒæœ‰                 â”‚
â”‚   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” [78%]       â”‚
â”‚                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚   æŠ€æœ¯é¢    â”‚  â”‚   åŸºæœ¬é¢    â”‚  â”‚   èµ„é‡‘é¢    â”‚    â”‚
â”‚   â”‚    75åˆ†    â”‚  â”‚    82åˆ†    â”‚  â”‚    68åˆ†    â”‚    â”‚
â”‚   â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘ â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘ â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                         â”‚
â”‚   ğŸ“Š æŠ€æœ¯é¢æ‘˜è¦                                         â”‚
â”‚   â€¢ MACDé‡‘å‰å½¢æˆï¼ŒçŸ­æœŸåŠ¨èƒ½è½¬å¼º                          â”‚
â”‚   â€¢ RSI(6)=65ï¼Œæœªè¿›å…¥è¶…ä¹°åŒºé—´                          â”‚
â”‚   â€¢ è‚¡ä»·ä½äºå¸ƒæ—å¸¦ä¸Šè½¨é™„è¿‘                              â”‚
â”‚   â€¢ æ”¯æ’‘ä½: 1650å…ƒ | é˜»åŠ›ä½: 1800å…ƒ                    â”‚
â”‚                                                         â”‚
â”‚   ğŸ“ˆ åŸºæœ¬é¢æ‘˜è¦                                         â”‚
â”‚   â€¢ ROEç»´æŒ25%ä»¥ä¸Šï¼Œç›ˆåˆ©èƒ½åŠ›ä¼˜å¼‚                        â”‚
â”‚   â€¢ æ¯›åˆ©ç‡91.5%ï¼Œå“ç‰ŒæŠ¤åŸæ²³æ·±åš                        â”‚
â”‚   â€¢ è¥æ”¶å¢é€Ÿ15%ï¼Œç¨³å¥å¢é•¿                               â”‚
â”‚                                                         â”‚
â”‚   ğŸ’° èµ„é‡‘é¢æ‘˜è¦                                         â”‚
â”‚   â€¢ è¿‘5æ—¥ä¸»åŠ›å‡€æµå…¥1.2äº¿                               â”‚
â”‚   â€¢ åŒ—å‘èµ„é‡‘æŒç»­åŠ ä»“                                    â”‚
â”‚   â€¢ æœºæ„è°ƒç ”é¢‘æ¬¡å¢åŠ                                     â”‚
â”‚                                                         â”‚
â”‚   âš ï¸ é£é™©æç¤º                                           â”‚
â”‚   â€¢ ä¼°å€¼å¤„äºå†å²é«˜ä½ï¼Œæ³¨æ„å›è°ƒé£é™©                      â”‚
â”‚   â€¢ æ¶ˆè´¹å¤è‹ä¸åŠé¢„æœŸ                                    â”‚
â”‚                                                         â”‚
â”‚   å¯ä¿¡åº¦: é«˜ (æ•°æ®å®Œæ•´åº¦98%ï¼Œæ¨¡å‹å›æµ‹å‡†ç¡®ç‡82%)        â”‚
â”‚   åˆ†ææ—¶é—´: 2024-01-15 15:30 | ä¸‹æ¬¡æ›´æ–°: 2024-01-16    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 è¶‹åŠ¿é¢„æµ‹å±•ç¤º

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AIè¶‹åŠ¿é¢„æµ‹ - å®å¾·æ—¶ä»£(300750)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚   ã€çŸ­æœŸé¢„æµ‹ã€‘(æœªæ¥1-5ä¸ªäº¤æ˜“æ—¥)                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                                                 â”‚  â”‚
â”‚   â”‚         â–² é¢„æµ‹åŒºé—´                              â”‚  â”‚
â”‚   â”‚        /â”‚\  180-195å…ƒ                          â”‚  â”‚
â”‚   â”‚       / â”‚ \  æ¦‚ç‡: 55%                         â”‚  â”‚
â”‚   â”‚      /  â”‚  \                                    â”‚  â”‚
â”‚   â”‚â”€â”€â”€â”€â”€â—â”€â”€â”€â”¼â”€â”€â”€â—â”€â”€â”€â”€ å½“å‰ä»·: 175å…ƒ                â”‚  â”‚
â”‚   â”‚    /    â”‚    \   æ–¹å‘: éœ‡è¡åå¼º                 â”‚  â”‚
â”‚   â”‚   â–¼     â”‚     â–¼                                 â”‚  â”‚
â”‚   â”‚ æ”¯æ’‘ä½  â”‚   é˜»åŠ›ä½                              â”‚  â”‚
â”‚   â”‚ 165å…ƒ   â”‚   185å…ƒ                               â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚   å…³é”®å› å­: ä¸šç»©è¶…é¢„æœŸã€æ–°èƒ½æºè½¦é”€é‡å¢é•¿                â”‚
â”‚   ä¸ç¡®å®šæ€§: åŸææ–™ä»·æ ¼æ³¢åŠ¨ã€ç«äº‰åŠ å‰§                    â”‚
â”‚   å¯ä¿¡åº¦: ä¸­ç­‰ (å¸‚åœºç¯å¢ƒéœ‡è¡)                           â”‚
â”‚                                                         â”‚
â”‚   ã€ä¸­æœŸé¢„æµ‹ã€‘(æœªæ¥1-4å‘¨)                               â”‚
â”‚   æ–¹å‘: ä¸Šæ¶¨    æ¦‚ç‡: 60%    ç›®æ ‡åŒºé—´: 190-220å…ƒ       â”‚
â”‚   å‚¬åŒ–å‰‚: Q4ä¸šç»©å‘å¸ƒã€äº§èƒ½æ‰©å¼ è®¡åˆ’                      â”‚
â”‚   é£é™©: è¡Œä¸šä»·æ ¼æˆ˜ã€æµ·å¤–æ”¿ç­–å˜åŒ–                        â”‚
â”‚   å¯ä¿¡åº¦: ä¸­ç­‰ (éœ€å…³æ³¨ä¸šç»©å…‘ç°)                         â”‚
â”‚                                                         â”‚
â”‚   ã€é•¿æœŸé¢„æµ‹ã€‘(1-6æœˆ) - ä»…ä¾›å‚è€ƒ                        â”‚
â”‚   åˆç†ä¼°å€¼: 200-250å…ƒ    å½“å‰ä¼°å€¼: åˆç†åä½ä¼°          â”‚
â”‚   ä¸ç¡®å®šæ€§: é«˜ (é•¿æœŸé¢„æµ‹å‡†ç¡®ç‡æœ‰é™)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 é£é™©æç¤ºå±•ç¤º

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš ï¸ é£é™©é¢„è­¦ - æ¯”äºšè¿ª(002594)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚   ğŸ”´ é«˜é£é™© (2é¡¹)                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ 1. æŠ€æœ¯ç ´ä½é£é™©                                   â”‚  â”‚
â”‚   â”‚    æ”¶ç›˜ä»·è·Œç ´BOLLä¸‹è½¨ï¼Œä¸”æ”¾é‡ä¸‹è·Œ                 â”‚  â”‚
â”‚   â”‚    å»ºè®®: å…³æ³¨240å…ƒæ”¯æ’‘ä½ï¼Œè·Œç ´è€ƒè™‘å‡ä»“           â”‚  â”‚
â”‚   â”‚                                                 â”‚  â”‚
â”‚   â”‚ 2. ä¸»åŠ›èµ„é‡‘æŒç»­æµå‡º                               â”‚  â”‚
â”‚   â”‚    è¿ç»­7æ—¥å‡€æµå‡ºï¼Œç´¯è®¡æµå‡º8.5äº¿å…ƒ                â”‚  â”‚
â”‚   â”‚    å»ºè®®: è§‚æœ›ï¼Œç­‰å¾…èµ„é‡‘å›æµä¿¡å·                  â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚   ğŸŸ¡ ä¸­é£é™© (1é¡¹)                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ 3. æœºæ„è¯„çº§ä¸‹è°ƒ                                   â”‚  â”‚
â”‚   â”‚    è¿‘ä¸€å‘¨2å®¶æœºæ„ä¸‹è°ƒè¯„çº§è‡³"ä¸­æ€§"                â”‚  â”‚
â”‚   â”‚    å»ºè®®: å…³æ³¨åç»­ç ”æŠ¥è§‚ç‚¹å˜åŒ–                    â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚   ğŸŸ¢ ä½é£é™© (1é¡¹)                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ 4. ç­¹ç é›†ä¸­åº¦ä¸‹é™                                 â”‚  â”‚
â”‚   â”‚    æ•£æˆ·æŒä»“æ¯”ä¾‹ä¸Šå‡ï¼ŒçŸ­æœŸæ³¢åŠ¨å¯èƒ½åŠ å¤§            â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚   ç»¼åˆå»ºè®®: çŸ­æœŸè°¨æ…ï¼Œå…³æ³¨240å…ƒæ”¯æ’‘ï¼Œè·Œç ´è€ƒè™‘æ­¢æŸ      â”‚
â”‚   é¢„è­¦æ—¶é—´: 2024-01-15 14:30 | å®æ—¶ç›‘æ§ä¸­              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 6. ç¼“å­˜å’Œæ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ

### 6.1 å¤šçº§ç¼“å­˜æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å¤šçº§ç¼“å­˜æ¶æ„                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  L1 - å†…å­˜ç¼“å­˜ (Redis)                          â”‚   â”‚
â”‚  â”‚  â€¢ çƒ­ç‚¹è‚¡ç¥¨åˆ†æç»“æœ (TTL: 5åˆ†é’Ÿ)               â”‚   â”‚
â”‚  â”‚  â€¢ å®æ—¶èµ„é‡‘æµå‘ (TTL: 1åˆ†é’Ÿ)                   â”‚   â”‚
â”‚  â”‚  â€¢ ç”¨æˆ·ä¼šè¯çŠ¶æ€ (TTL: 30åˆ†é’Ÿ)                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  L2 - åº”ç”¨ç¼“å­˜ (æœ¬åœ°å†…å­˜)                       â”‚   â”‚
â”‚  â”‚  â€¢ æŒ‡æ ‡è®¡ç®—ç»“æœ (TTL: 15åˆ†é’Ÿ)                  â”‚   â”‚
â”‚  â”‚  â€¢ å‘é‡æ£€ç´¢ç»“æœ (TTL: 1å°æ—¶)                   â”‚   â”‚
â”‚  â”‚  â€¢ LLMå“åº”ç¼“å­˜ (TTL: 1å°æ—¶)                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  L3 - æŒä¹…åŒ–ç¼“å­˜ (æ•°æ®åº“)                       â”‚   â”‚
â”‚  â”‚  â€¢ å†å²åˆ†æè®°å½• (æ°¸ä¹…)                         â”‚   â”‚
â”‚  â”‚  â€¢ ç ”æŠ¥å‘é‡åº“ (æ¯æ—¥æ›´æ–°)                       â”‚   â”‚
â”‚  â”‚  â€¢ ç”¨æˆ·ç”»åƒæ•°æ® (å®æ—¶æ›´æ–°)                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 ç¼“å­˜ç­–ç•¥å®ç°

```python
class CacheManager:
    """ç¼“å­˜ç®¡ç†å™¨"""
    
    def __init__(self):
        self.redis = RedisClient()
        self.local_cache = LRUCache(maxsize=1000)
        self.db = Database()
    
    async def get_analysis_result(
        self, 
        ts_code: str, 
        analysis_type: str
    ) -> Optional[AnalysisResult]:
        """è·å–åˆ†æç»“æœï¼Œå¤šçº§ç¼“å­˜"""
        cache_key = f"{analysis_type}:{ts_code}"
        
        # L1: Redis
        result = await self.redis.get(cache_key)
        if result:
            return AnalysisResult.parse(result)
        
        # L2: æœ¬åœ°ç¼“å­˜
        result = self.local_cache.get(cache_key)
        if result:
            return result
        
        # L3: æ•°æ®åº“
        result = await self.db.get_latest_analysis(ts_code, analysis_type)
        if result and result.is_fresh():
            # å›å¡«åˆ°ä¸Šå±‚ç¼“å­˜
            await self.set_cache(cache_key, result)
            return result
        
        return None
    
    async def set_cache(
        self, 
        key: str, 
        value: Any, 
        ttl: int = 300
    ):
        """è®¾ç½®å¤šçº§ç¼“å­˜"""
        # è®¾ç½®Redis
        await self.redis.setex(key, ttl, json.dumps(value))
        
        # è®¾ç½®æœ¬åœ°ç¼“å­˜ (TTLå‡åŠ)
        self.local_cache.set(key, value, ttl=ttl//2)
    
    def invalidate_stock_cache(self, ts_code: str):
        """è‚¡ç¥¨æ•°æ®æ›´æ–°æ—¶ï¼Œå¤±æ•ˆç›¸å…³ç¼“å­˜"""
        patterns = [
            f"diagnosis:{ts_code}",
            f"prediction:{ts_code}",
            f"sentiment:{ts_code}",
        ]
        for pattern in patterns:
            self.redis.delete_pattern(pattern)
            self.local_cache.delete_pattern(pattern)
```

### 6.3 æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

```python
class PerformanceOptimizer:
    """æ€§èƒ½ä¼˜åŒ–å™¨"""
    
    def __init__(self):
        self.async_pool = AsyncWorkerPool(max_workers=10)
        self.batch_processor = BatchProcessor(batch_size=50)
    
    async def batch_analysis(
        self, 
        stock_list: List[str]
    ) -> List[AnalysisResult]:
        """æ‰¹é‡åˆ†æï¼Œæå‡ååé‡"""
        # åˆ†æ‰¹å¤„ç†
        batches = self.batch_processor.split(stock_list)
        
        # å¹¶è¡Œå¤„ç†
        tasks = [
            self.async_pool.submit(self.analyze_batch, batch)
            for batch in batches
        ]
        
        results = await asyncio.gather(*tasks)
        return self.flatten_results(results)
    
    async def analyze_batch(self, batch: List[str]) -> List[AnalysisResult]:
        """æ‰¹é‡åˆ†æå•ä¸ªæ‰¹æ¬¡"""
        # æ‰¹é‡è·å–æ•°æ®
        data = await self.batch_fetch_data(batch)
        
        # æ‰¹é‡é¢„å¤„ç†
        features = self.batch_preprocess(data)
        
        # æ‰¹é‡è°ƒç”¨æ¨¡å‹ (ä½¿ç”¨æ‰¹é‡API)
        results = await self.batch_call_llm(features)
        
        return results
    
    async def batch_call_llm(
        self, 
        features: List[Dict]
    ) -> List[str]:
        """æ‰¹é‡è°ƒç”¨LLM API"""
        # æ„å»ºæ‰¹é‡prompt
        batch_prompt = self.build_batch_prompt(features)
        
        # å•æ¬¡APIè°ƒç”¨
        response = await self.model_manager.generate(
            prompt=batch_prompt,
            model="gpt-3.5-turbo",
            max_tokens=4000  # æ‰¹é‡éœ€è¦æ›´å¤štoken
        )
        
        # è§£ææ‰¹é‡ç»“æœ
        return self.parse_batch_response(response)
```

### 6.4 å“åº”æ—¶é—´ä¼˜åŒ–

| åŠŸèƒ½æ¨¡å— | ç›®æ ‡å“åº”æ—¶é—´ | ä¼˜åŒ–ç­–ç•¥ |
|---------|------------|---------|
| è¡Œæƒ…è¯Šæ–­ | < 2ç§’ | é¢„è®¡ç®— + ç¼“å­˜ |
| ç ”æŠ¥è§£è¯» | < 3ç§’ | å‘é‡æ£€ç´¢ + æ‘˜è¦ç¼“å­˜ |
| èˆ†æƒ…åˆ†æ | < 1ç§’ | å®æ—¶æµå¤„ç† |
| è¶‹åŠ¿é¢„æµ‹ | < 2ç§’ | æ¨¡å‹é¢„åŠ è½½ |
| æ™ºèƒ½é—®ç­” | < 1.5ç§’ | æ„å›¾ç¼“å­˜ + å¿«é€Ÿè·¯ç”± |
| é£é™©æç¤º | < 500ms | å†…å­˜è®¡ç®— + æ¨é€ |

## 7. å¯ä¿¡åº¦æ ‡æ³¨æ–¹æ¡ˆ

### 7.1 å¯ä¿¡åº¦è¯„ä¼°ç»´åº¦

```python
class ConfidenceEvaluator:
    """å¯ä¿¡åº¦è¯„ä¼°å™¨"""
    
    def evaluate(self, analysis_result: AnalysisResult) -> ConfidenceScore:
        """ç»¼åˆè¯„ä¼°å¯ä¿¡åº¦"""
        
        # 1. æ•°æ®å®Œæ•´åº¦è¯„åˆ†
        data_completeness = self.score_data_completeness(
            analysis_result.input_data
        )
        
        # 2. æ¨¡å‹å†å²å‡†ç¡®ç‡
        model_accuracy = self.get_model_accuracy(
            analysis_result.model_type,
            analysis_result.prediction_horizon
        )
        
        # 3. å¸‚åœºç¯å¢ƒè¯„åˆ†
        market_regime = self.score_market_regime(
            analysis_result.analysis_date
        )
        
        # 4. é¢„æµ‹æ—¶é—´è·¨åº¦è¯„åˆ†
        time_factor = self.score_time_horizon(
            analysis_result.prediction_horizon
        )
        
        # 5. å…±è¯†åº¦è¯„åˆ†
        consensus_score = self.score_consensus(
            analysis_result.signals
        )
        
        # ç»¼åˆè¯„åˆ†
        overall = (
            data_completeness * 0.25 +
            model_accuracy * 0.30 +
            market_regime * 0.20 +
            time_factor * 0.15 +
            consensus_score * 0.10
        )
        
        return ConfidenceScore(
            overall=overall,
            data_completeness=data_completeness,
            model_accuracy=model_accuracy,
            market_regime=market_regime,
            time_factor=time_factor,
            consensus_score=consensus_score,
            level=self.get_level(overall)
        )
    
    def get_level(self, score: float) -> str:
        """æ ¹æ®åˆ†æ•°ç¡®å®šå¯ä¿¡åº¦ç­‰çº§"""
        if score >= 0.8:
            return "high"
        elif score >= 0.5:
            return "medium"
        else:
            return "low"
```

### 7.2 å¯ä¿¡åº¦å±•ç¤ºè§„åˆ™

```
å¯ä¿¡åº¦ç­‰çº§å®šä¹‰:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŸ¢ é«˜å¯ä¿¡åº¦ (0.8-1.0)                                  â”‚
â”‚  â€¢ æ•°æ®å®Œæ•´åº¦ > 95%                                     â”‚
â”‚  â€¢ æ¨¡å‹å†å²å‡†ç¡®ç‡ > 75%                                 â”‚
â”‚  â€¢ å¸‚åœºç¯å¢ƒç¨³å®š                                         â”‚
â”‚  â€¢ çŸ­æœŸé¢„æµ‹ (< 1å‘¨)                                     â”‚
â”‚  â€¢ å¤šä¿¡å·ä¸€è‡´                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸŸ¡ ä¸­ç­‰å¯ä¿¡åº¦ (0.5-0.8)                                â”‚
â”‚  â€¢ æ•°æ®å®Œæ•´åº¦ 80-95%                                    â”‚
â”‚  â€¢ æ¨¡å‹å†å²å‡†ç¡®ç‡ 60-75%                                â”‚
â”‚  â€¢ å¸‚åœºéœ‡è¡                                             â”‚
â”‚  â€¢ ä¸­æœŸé¢„æµ‹ (1-4å‘¨)                                     â”‚
â”‚  â€¢ ä¿¡å·éƒ¨åˆ†ä¸€è‡´                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”´ ä½å¯ä¿¡åº¦ (0-0.5)                                    â”‚
â”‚  â€¢ æ•°æ®å®Œæ•´åº¦ < 80%                                     â”‚
â”‚  â€¢ æ¨¡å‹å†å²å‡†ç¡®ç‡ < 60%                                 â”‚
â”‚  â€¢ å¸‚åœºæç«¯æ³¢åŠ¨                                         â”‚
â”‚  â€¢ é•¿æœŸé¢„æµ‹ (> 1æœˆ)                                     â”‚
â”‚  â€¢ ä¿¡å·çŸ›ç›¾                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.3 ä¸ç¡®å®šæ€§è¯´æ˜æ¨¡æ¿

```python
UNCERTAINTY_TEMPLATES = {
    "high_confidence": """
    æœ¬åˆ†æåŸºäºå®Œæ•´çš„å¸‚åœºæ•°æ®ï¼Œæ¨¡å‹å†å²å›æµ‹å‡†ç¡®ç‡è¾ƒé«˜ã€‚
    ä½†è¯·æ³¨æ„ï¼šä»»ä½•é¢„æµ‹éƒ½å­˜åœ¨ä¸ç¡®å®šæ€§ï¼Œå¸‚åœºå¯èƒ½å—çªå‘å› ç´ å½±å“ã€‚
    å»ºè®®ç»“åˆå…¶ä»–åˆ†æå·¥å…·ç»¼åˆåˆ¤æ–­ã€‚
    """,
    
    "medium_confidence": """
    æœ¬åˆ†æå­˜åœ¨ä¸€å®šä¸ç¡®å®šæ€§ï¼š
    {specific_reasons}
    å»ºè®®å…³æ³¨åç»­æ•°æ®æ›´æ–°ï¼Œé€‚æ—¶è°ƒæ•´åˆ¤æ–­ã€‚
    """,
    
    "low_confidence": """
    âš ï¸ é‡è¦æç¤ºï¼šæœ¬åˆ†æå¯ä¿¡åº¦è¾ƒä½
    
    åŸå› ï¼š
    {specific_reasons}
    
    å»ºè®®ï¼š
    1. è°¨æ…å‚è€ƒæœ¬åˆ†æç»“æœ
    2. ç­‰å¾…æ›´å¤šä¿¡æ¯æ˜ç¡®
    3. è€ƒè™‘å’¨è¯¢ä¸“ä¸šæŠ•èµ„é¡¾é—®
    """
}
```

## 8. æŠ€æœ¯å®ç°å»ºè®®

### 8.1 æŠ€æœ¯æ ˆæ¨è

```yaml
# åç«¯æŠ€æœ¯æ ˆ
backend:
  framework: FastAPI  # é«˜æ€§èƒ½å¼‚æ­¥æ¡†æ¶
  database: PostgreSQL + TimescaleDB  # æ—¶åºæ•°æ®
  cache: Redis Cluster
  queue: Celery + Redis
  vector_db: Pinecone / Milvus
  
# AIæ¨¡å‹
ai_models:
  primary: OpenAI GPT-4
  secondary: Anthropic Claude-3
  local: Qwen-7B / ChatGLM3-6B
  embedding: text-embedding-3-small
  
# éƒ¨ç½²
deployment:
  container: Docker + Kubernetes
  monitoring: Prometheus + Grafana
  logging: ELK Stack
```

### 8.2 æ•°æ®åº“è¡¨è®¾è®¡

```sql
-- AIåˆ†æç»“æœè¡¨
CREATE TABLE ai_analysis_results (
    id SERIAL PRIMARY KEY,
    ts_code VARCHAR(20) NOT NULL,
    analysis_type VARCHAR(50) NOT NULL,
    analysis_date DATE NOT NULL,
    result JSONB NOT NULL,
    confidence_score FLOAT,
    model_version VARCHAR(50),
    created_at TIMESTAMP DEFAULT NOW(),
    UNIQUE(ts_code, analysis_type, analysis_date)
);

-- ç”¨æˆ·AIäº¤äº’è®°å½•
CREATE TABLE ai_user_interactions (
    id SERIAL PRIMARY KEY,
    user_id INTEGER NOT NULL,
    session_id VARCHAR(100),
    query TEXT NOT NULL,
    response TEXT NOT NULL,
    intent VARCHAR(50),
    feedback_score INTEGER,
    created_at TIMESTAMP DEFAULT NOW()
);

-- å‘é‡å­˜å‚¨è¡¨
CREATE TABLE ai_vectors (
    id SERIAL PRIMARY KEY,
    content_type VARCHAR(50) NOT NULL,  -- report, news, analysis
    content_id VARCHAR(100) NOT NULL,
    embedding VECTOR(1536),
    metadata JSONB,
    created_at TIMESTAMP DEFAULT NOW()
);

-- ç¼“å­˜è¡¨
CREATE TABLE ai_cache (
    cache_key VARCHAR(255) PRIMARY KEY,
    cache_value JSONB NOT NULL,
    expires_at TIMESTAMP NOT NULL,
    created_at TIMESTAMP DEFAULT NOW()
);
```

## 9. æ€»ç»“

æœ¬AIè¡Œæƒ…åˆ†ææ¨¡å—è®¾è®¡æ¶µç›–7å¤§æ ¸å¿ƒåŠŸèƒ½ï¼š

1. **è¡Œæƒ…è¯Šæ–­**ï¼šæŠ€æœ¯é¢+åŸºæœ¬é¢+èµ„é‡‘é¢ç»¼åˆåˆ†æ
2. **ç ”æŠ¥è§£è¯»**ï¼šæ™ºèƒ½æå–ç ”æŠ¥æ ¸å¿ƒè§‚ç‚¹
3. **èˆ†æƒ…åˆ†æ**ï¼šå¤šç»´åº¦æƒ…ç»ªç›‘æµ‹
4. **è¶‹åŠ¿é¢„æµ‹**ï¼šçŸ­ä¸­é•¿æœŸé¢„æµ‹+ä¸ç¡®å®šæ€§æ ‡æ³¨
5. **é£é™©æç¤º**ï¼šå®æ—¶ç›‘æ§+åˆ†çº§é¢„è­¦
6. **æ™ºèƒ½é—®ç­”**ï¼šè‡ªç„¶è¯­è¨€äº¤äº’
7. **ä¸ªæ€§æ¨è**ï¼šåŸºäºç”¨æˆ·ç”»åƒçš„ç²¾å‡†æ¨è

å…³é”®æŠ€æœ¯ç‰¹ç‚¹ï¼š
- å¤šçº§ç¼“å­˜æ¶æ„ï¼Œç¡®ä¿å“åº”é€Ÿåº¦
- æ¨¡å‹è·¯ç”±ç­–ç•¥ï¼Œå¹³è¡¡æˆæœ¬ä¸è´¨é‡
- å¯ä¿¡åº¦è¯„ä¼°ä½“ç³»ï¼Œé€æ˜åŒ–AIå±€é™
- æµæ‰¹ç»“åˆå¤„ç†ï¼Œå…¼é¡¾å®æ—¶ä¸æ·±åº¦åˆ†æ
